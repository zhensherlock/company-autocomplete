import{z as g,k as h,D as d,B as m}from"./chunks/floating-ui.dom.browser.min.5c826213.js";import{d as y,p as v,c as f,o as C,R as D}from"./chunks/framework.c75b2d09.js";const A={target:"body",api:"qcc_openapi",queryDelay:500,placeholder:"请输入企业名称或统一社会信用代码",clearable:!0,clearIcon:'<svg viewBox="64 64 896 896" focusable="false" data-icon="close-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"></path></svg>',fetchCallback:()=>{}},E=n=>typeof n=="string";function _(n,a=0,{start:e=!0,middle:t=!0,once:s=!1}={}){let o=e,i=0,l,r=!1;function c(...u){if(r)return;const p=Date.now()-i;i=Date.now(),e&&t&&p>=a&&(o=!0),o?(o=!1,n.apply(this,u),s&&c.cancel()):(t&&p<a||!t)&&(clearTimeout(l),l=setTimeout(()=>{i=Date.now(),n.apply(this,u),s&&c.cancel()},t?a-p:a))}return c.cancel=()=>{clearTimeout(l),r=!0},c}function F(n,a=0,{start:e=!1,middle:t=!1,once:s=!1}={}){return _(n,a,{start:e,middle:t,once:s})}const x=async(n,a)=>{switch(n){case"qcc_openapi":return await L(a);default:return[]}},L=async n=>{if(console.log(n),n.length<2)return[];const e=await(await fetch(`https://c.qcc.com/embed/api/company/getCompanyName?searchKey=${n}`,{method:"GET",mode:"cors",headers:{Referer:"https://c.qcc.com/"}})).json();return e.status!=="200"?[]:e.result.map(t=>({name:t.companyName,id:t.keyNo}))},S=(n,a)=>{let e=!1;document.addEventListener("click",t=>{!n.contains(t.target)&&!e&&a(),e=n.contains(t.target)},!0)};class b{constructor(a={}){this.suggestions=[],this.suggestionElement=document.createElement("div"),this.suggestionActivatedClassName="suggestion-popper--activated",this.inputWrapElement=document.createElement("div"),this.inputWrapHaveWordsClassName="company-autocomplete--words",this.inputWrapActivatedClassName="company-autocomplete--activated",this.options=Object.assign({},A,a),E(this.options.target)?this.target=document.querySelector(this.options.target):this.target=this.options.target,this.render()}render(){var t;if(!this.target)return;const a=['<div class="company-autocomplete">','<div class="company-autocomplete__input">',`<input type="text" placeholder="${this.options.placeholder}" />`,"</div>",this.options.clearable&&`<div class="company-autocomplete__clear">${this.options.clearIcon}</div>`,"</div>"];this.target.innerHTML=a.join(""),this.suggestionElement.classList.add("suggestion-popper"),this.suggestionElement.textContent="",document.body.appendChild(this.suggestionElement),this.inputWrapElement=this.target.querySelector(".company-autocomplete");const e=this.inputWrapElement.querySelector("input");g(this.inputWrapElement,this.suggestionElement,()=>{h(this.inputWrapElement,this.suggestionElement,{middleware:[d(5),m({apply:({rects:s})=>{Object.assign(this.suggestionElement.style,{width:`${s.reference.width}px`})}})]}).then(({x:s,y:o})=>{Object.assign(this.suggestionElement.style,{left:`${s}px`,top:`${o}px`})})}),e==null||e.addEventListener("input",()=>{const s=e.value;this.inputWrapElement.classList[s.length>0?"add":"remove"](this.inputWrapHaveWordsClassName)}),e==null||e.addEventListener("input",F(()=>{const s=e.value;this.handleQuerySuggestion(s)},this.options.queryDelay)),e==null||e.addEventListener("click",s=>{if(this.suggestions.length>0){this.showSuggestion();return}const o=s.target.value;this.handleQuerySuggestion(o)}),S(this.suggestionElement,()=>{this.hideSuggestion()}),this.suggestionElement.addEventListener("click",s=>{var o;if(s.target.closest(".suggestion")){const i=(o=s.target.closest(".suggestion"))==null?void 0:o.querySelector(".suggestion__label"),l=(i==null?void 0:i.textContent)||"";e.value=l,this.suggestions=[],this.options.fetchCallback(l),this.hideSuggestion()}}),this.inputClearElement=this.inputWrapElement.querySelector(".company-autocomplete__clear"),this.inputClearElement&&((t=this.inputClearElement)==null||t.addEventListener("click",()=>{e.value="",this.inputWrapElement.classList.remove(this.inputWrapHaveWordsClassName)}))}handleQuerySuggestion(a){x(this.options.api,a).then(e=>{if(this.suggestions=e,e.length===0){this.suggestionElement.innerHTML="",this.hideSuggestion();return}const t=['<div class="suggestion-popper__body">'];e.forEach(s=>{t.push('<div class="suggestion">'),t.push(`<div class="suggestion__avatar"><img data-suggestion-id="${s.id}" src="https://image.qcc.com/logo/${s.id}.jpg" alt="${s.name}"/></div>`),t.push(`<div class="suggestion__label">${s.name}</div>`),t.push('<div class="suggestion__extra"></div>'),t.push("</div>")}),t.push("</div>"),t.push('<div class="suggestion-popper__footer">'),t.push("</div>"),this.suggestionElement.innerHTML=t.join(""),this.suggestionElement.querySelectorAll("img").forEach(s=>{s.addEventListener("error",function(){this.src=`https://image.qcc.com/auto/${this.dataset.suggestionId}.jpg`})}),this.showSuggestion()})}showSuggestion(){this.inputWrapElement.classList.add(this.inputWrapActivatedClassName),this.suggestionElement.classList.add(this.suggestionActivatedClassName)}hideSuggestion(){this.inputWrapElement.classList.remove(this.inputWrapActivatedClassName),this.suggestionElement.classList.remove(this.suggestionActivatedClassName)}}const q=D(`<h1 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h1><h2 id="companyautocomplete" tabindex="-1">CompanyAutocomplete <a class="header-anchor" href="#companyautocomplete" aria-label="Permalink to &quot;CompanyAutocomplete&quot;">​</a></h2><div id="example_ca"></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">CompanyAutocomplete</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">company-autocomplete</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> companyAutocomplete </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CompanyAutocomplete</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">target</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#example</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div>`,4),W=[q],j=JSON.parse('{"title":"Example","description":"","frontmatter":{"layout":"doc"},"headers":[],"relativePath":"guide/example.md","filePath":"guide/example.md"}'),N={name:"guide/example.md"},$=y({...N,setup(n){return v(()=>{new b({target:"#example_ca"})}),(a,e)=>(C(),f("div",null,W))}});export{j as __pageData,$ as default};
