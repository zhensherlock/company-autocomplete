import{z as g,k as h,B as m}from"./chunks/floating-ui.dom.browser.min.5c826213.js";import{d,p as y,c as f,o as D,R as C}from"./chunks/framework.c75b2d09.js";const v={target:"body",api:"qcc_openapi",queryDelay:500,placeholder:"请输入企业名称或统一社会信用代码",fetchCallback:()=>{}},A=n=>typeof n=="string";function _(n,s=0,{start:t=!0,middle:e=!0,once:a=!1}={}){let o=t,i=0,p,r=!1;function l(...u){if(r)return;const c=Date.now()-i;i=Date.now(),t&&e&&c>=s&&(o=!0),o?(o=!1,n.apply(this,u),a&&l.cancel()):(e&&c<s||!e)&&(clearTimeout(p),p=setTimeout(()=>{i=Date.now(),n.apply(this,u),a&&l.cancel()},e?s-c:s))}return l.cancel=()=>{clearTimeout(p),r=!0},l}function E(n,s=0,{start:t=!1,middle:e=!1,once:a=!1}={}){return _(n,s,{start:t,middle:e,once:a})}const F=async(n,s)=>{switch(n){case"qcc_openapi":return await x(s);default:return[]}},x=async n=>{if(console.log(n),n.length<2)return[];const t=await(await fetch(`https://c.qcc.com/embed/api/company/getCompanyName?searchKey=${n}`,{method:"GET",mode:"cors",headers:{Referer:"https://c.qcc.com/"}})).json();return t.status!=="200"?[]:t.result.map(e=>({name:e.companyName,id:e.keyNo}))},S=(n,s)=>{let t=!1;document.addEventListener("click",e=>{!n.contains(e.target)&&!t&&s(),t=n.contains(e.target)},!0)};class b{constructor(s={}){this.suggestions=[],this.suggestionElement=document.createElement("div"),this.inputWrapElement=document.createElement("div"),this.options=Object.assign({},v,s),A(this.options.target)?this.target=document.querySelector(this.options.target):this.target=this.options.target,this.render()}render(){if(!this.target)return;const s=['<div class="company-autocomplete">','<div class="company-autocomplete__input">',`<input type="text" placeholder="${this.options.placeholder}" />`,"</div>","</div>"];this.target.innerHTML=s.join(""),this.suggestionElement.classList.add("suggestion-popper"),this.suggestionElement.innerHTML="",document.body.appendChild(this.suggestionElement),this.inputWrapElement=this.target.querySelector(".company-autocomplete");const t=this.inputWrapElement.querySelector("input");g(this.inputWrapElement,this.suggestionElement,()=>{h(this.inputWrapElement,this.suggestionElement,{middleware:[m({apply:({rects:e})=>{Object.assign(this.suggestionElement.style,{width:`${e.reference.width}px`})}})]}).then(({x:e,y:a})=>{Object.assign(this.suggestionElement.style,{left:`${e}px`,top:`${a}px`})})}),t==null||t.addEventListener("input",E(e=>{const a=e.target.value;this.handleQuerySuggestion(a)},this.options.queryDelay)),t==null||t.addEventListener("click",e=>{if(this.suggestions.length>0){this.showSuggestion();return}const a=e.target.value;this.handleQuerySuggestion(a)}),S(this.suggestionElement,()=>{this.hideSuggestion()}),this.suggestionElement.addEventListener("click",e=>{var a;if(e.target.closest(".suggestion")){const o=(a=e.target.closest(".suggestion"))==null?void 0:a.querySelector(".suggestion__label"),i=(o==null?void 0:o.textContent)||"";t.value=i,this.suggestions=[],this.options.fetchCallback(i),this.hideSuggestion()}})}handleQuerySuggestion(s){F(this.options.api,s).then(t=>{if(this.suggestions=t,t.length===0){this.suggestionElement.innerHTML="",this.hideSuggestion();return}const e=['<div class="suggestion-popper__body">'];t.forEach(a=>{e.push('<div class="suggestion">'),e.push('<div class="suggestion__avatar"></div>'),e.push(`<div class="suggestion__label">${a.name}</div>`),e.push('<div class="suggestion__extra"></div>'),e.push("</div>")}),e.push("</div>"),e.push('<div class="suggestion-popper__footer">'),e.push("</div>"),this.suggestionElement.innerHTML=e.join(""),this.showSuggestion()})}showSuggestion(){this.inputWrapElement.classList.add("company-autocomplete--activated"),this.suggestionElement.classList.add("suggestion-popper--activated")}hideSuggestion(){this.inputWrapElement.classList.remove("company-autocomplete--activated"),this.suggestionElement.classList.remove("suggestion-popper--activated")}}const q=C(`<h1 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h1><h2 id="companyautocomplete" tabindex="-1">CompanyAutocomplete <a class="header-anchor" href="#companyautocomplete" aria-label="Permalink to &quot;CompanyAutocomplete&quot;">​</a></h2><div id="example_ca"></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">CompanyAutocomplete</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">company-autocomplete</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> companyAutocomplete </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CompanyAutocomplete</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">target</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#example</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div>`,4),L=[q],T=JSON.parse('{"title":"Example","description":"","frontmatter":{"layout":"doc"},"headers":[],"relativePath":"guide/example.md","filePath":"guide/example.md"}'),k={name:"guide/example.md"},O=d({...k,setup(n){return y(()=>{new b({target:"#example_ca"})}),(s,t)=>(D(),f("div",null,L))}});export{T as __pageData,O as default};
