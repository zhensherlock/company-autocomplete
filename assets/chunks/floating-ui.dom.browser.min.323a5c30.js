function Y(t){return t.split("-")[1]}function ct(t){return t==="y"?"height":"width"}function M(t){return t.split("-")[0]}function J(t){return["top","bottom"].includes(M(t))?"x":"y"}function ft(t,e,n){let{reference:o,floating:c}=t;const l=o.x+o.width/2-c.width/2,i=o.y+o.height/2-c.height/2,r=J(e),s=ct(r),a=o[s]/2-c[s]/2,u=r==="x";let f;switch(M(e)){case"top":f={x:l,y:o.y-c.height};break;case"bottom":f={x:l,y:o.y+o.height};break;case"right":f={x:o.x+o.width,y:i};break;case"left":f={x:o.x-c.width,y:i};break;default:f={x:o.x,y:o.y}}switch(Y(e)){case"start":f[r]-=a*(n&&u?-1:1);break;case"end":f[r]+=a*(n&&u?-1:1)}return f}const $t=async(t,e,n)=>{const{placement:o="bottom",strategy:c="absolute",middleware:l=[],platform:i}=n,r=l.filter(Boolean),s=await(i.isRTL==null?void 0:i.isRTL(e));let a=await i.getElementRects({reference:t,floating:e,strategy:c}),{x:u,y:f}=ft(a,o,s),d=o,m={},g=0;for(let h=0;h<r.length;h++){const{name:x,fn:p}=r[h],{x:y,y:w,data:R,reset:v}=await p({x:u,y:f,initialPlacement:o,placement:d,strategy:c,middlewareData:m,rects:a,platform:i,elements:{reference:t,floating:e}});u=y??u,f=w??f,m={...m,[x]:{...m[x],...R}},v&&g<=50&&(g++,typeof v=="object"&&(v.placement&&(d=v.placement),v.rects&&(a=v.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:c}):v.rects),{x:u,y:f}=ft(a,d,s)),h=-1)}return{x:u,y:f,placement:d,strategy:c,middlewareData:m}};function pt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function Q(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function yt(t,e){var n;e===void 0&&(e={});const{x:o,y:c,platform:l,rects:i,elements:r,strategy:s}=t,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:m=0}=e,g=pt(m),h=r[d?f==="floating"?"reference":"floating":f],x=Q(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(h)))==null||n?h:h.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(r.floating)),boundary:a,rootBoundary:u,strategy:s})),p=f==="floating"?{...i.floating,x:o,y:c}:i.reference,y=await(l.getOffsetParent==null?void 0:l.getOffsetParent(r.floating)),w=await(l.isElement==null?void 0:l.isElement(y))&&await(l.getScale==null?void 0:l.getScale(y))||{x:1,y:1},R=Q(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({rect:p,offsetParent:y,strategy:s}):p);return{top:(x.top-R.top+g.top)/w.y,bottom:(R.bottom-x.bottom+g.bottom)/w.y,left:(x.left-R.left+g.left)/w.x,right:(R.right-x.right+g.right)/w.x}}const it=Math.min,z=Math.max;function kt(t,e,n){return z(t,it(e,n))}const Bt=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:o=0}=t||{},{x:c,y:l,placement:i,rects:r,platform:s,elements:a}=e;if(n==null)return{};const u=pt(o),f={x:c,y:l},d=J(i),m=ct(d),g=await s.getDimensions(n),h=d==="y",x=h?"top":"left",p=h?"bottom":"right",y=h?"clientHeight":"clientWidth",w=r.reference[m]+r.reference[d]-f[d]-r.floating[m],R=f[d]-r.reference[d],v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(n));let b=v?v[y]:0;b&&await(s.isElement==null?void 0:s.isElement(v))||(b=a.floating[y]||r.floating[m]);const k=w/2-R/2,C=u[x],S=b-g[m]-u[p],F=b/2-g[m]/2+k,L=kt(C,F,S),D=Y(i)!=null&&F!=L&&r.reference[m]/2-(F<C?u[x]:u[p])-g[m]/2<0;return{[d]:f[d]-(D?F<C?C-F:S-F:0),data:{[d]:L,centerOffset:F-L}}}}),Ct=["top","right","bottom","left"];Ct.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Ft={left:"right",right:"left",bottom:"top",top:"bottom"};function U(t){return t.replace(/left|right|bottom|top/g,e=>Ft[e])}function Ot(t,e,n){n===void 0&&(n=!1);const o=Y(t),c=J(t),l=ct(c);let i=c==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(i=U(i)),{main:i,cross:U(i)}}const St={start:"end",end:"start"};function ot(t){return t.replace(/start|end/g,e=>St[e])}const zt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:o,middlewareData:c,rects:l,initialPlacement:i,platform:r,elements:s}=e,{mainAxis:a=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...h}=t,x=M(o),p=M(i)===i,y=await(r.isRTL==null?void 0:r.isRTL(s.floating)),w=f||(p||!g?[U(i)]:function(L){const D=U(L);return[ot(L),D,ot(D)]}(i));f||m==="none"||w.push(...function(L,D,B,W){const O=Y(L);let A=function(_,nt,At){const st=["left","right"],at=["right","left"],Dt=["top","bottom"],Pt=["bottom","top"];switch(_){case"top":case"bottom":return At?nt?at:st:nt?st:at;case"left":case"right":return nt?Dt:Pt;default:return[]}}(M(L),B==="start",W);return O&&(A=A.map(_=>_+"-"+O),D&&(A=A.concat(A.map(ot)))),A}(i,g,m,y));const R=[i,...w],v=await yt(e,h),b=[];let k=((n=c.flip)==null?void 0:n.overflows)||[];if(a&&b.push(v[x]),u){const{main:L,cross:D}=Ot(o,l,y);b.push(v[L],v[D])}if(k=[...k,{placement:o,overflows:b}],!b.every(L=>L<=0)){var C,S;const L=(((C=c.flip)==null?void 0:C.index)||0)+1,D=R[L];if(D)return{data:{index:L,overflows:k},reset:{placement:D}};let B=(S=k.filter(W=>W.overflows[0]<=0).sort((W,O)=>W.overflows[1]-O.overflows[1])[0])==null?void 0:S.placement;if(!B)switch(d){case"bestFit":{var F;const W=(F=k.map(O=>[O.placement,O.overflows.filter(A=>A>0).reduce((A,_)=>A+_,0)]).sort((O,A)=>O[1]-A[1])[0])==null?void 0:F[0];W&&(B=W);break}case"initialPlacement":B=i}if(o!==B)return{reset:{placement:B}}}return{}}}},Mt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,c=await async function(l,i){const{placement:r,platform:s,elements:a}=l,u=await(s.isRTL==null?void 0:s.isRTL(a.floating)),f=M(r),d=Y(r),m=J(r)==="x",g=["left","top"].includes(f)?-1:1,h=u&&m?-1:1,x=typeof i=="function"?i(l):i;let{mainAxis:p,crossAxis:y,alignmentAxis:w}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...x};return d&&typeof w=="number"&&(y=d==="end"?-1*w:w),m?{x:y*h,y:p*g}:{x:p*g,y:y*h}}(e,t);return{x:n+c.x,y:o+c.y,data:c}}}},Nt=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:o,platform:c,elements:l}=e,{apply:i=()=>{},...r}=t,s=await yt(e,r),a=M(n),u=Y(n),f=J(n)==="x",{width:d,height:m}=o.floating;let g,h;a==="top"||a==="bottom"?(g=a,h=u===(await(c.isRTL==null?void 0:c.isRTL(l.floating))?"start":"end")?"left":"right"):(h=a,g=u==="end"?"top":"bottom");const x=m-s[g],p=d-s[h],y=!e.middlewareData.shift;let w=x,R=p;if(f){const b=d-s.left-s.right;R=u||y?it(p,b):b}else{const b=m-s.top-s.bottom;w=u||y?it(x,b):b}if(y&&!u){const b=z(s.left,0),k=z(s.right,0),C=z(s.top,0),S=z(s.bottom,0);f?R=d-2*(b!==0||k!==0?b+k:z(s.left,s.right)):w=m-2*(C!==0||S!==0?C+S:z(s.top,s.bottom))}await i({...e,availableWidth:R,availableHeight:w});const v=await c.getDimensions(l.floating);return d!==v.width||m!==v.height?{reset:{rects:!0}}:{}}}};function E(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function P(t){return E(t).getComputedStyle(t)}function xt(t){return t instanceof E(t).Node}function V(t){return xt(t)?(t.nodeName||"").toLowerCase():""}let K;function wt(){if(K)return K;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(K=t.brands.map(e=>e.brand+"/"+e.version).join(" "),K):navigator.userAgent}function $(t){return t instanceof E(t).HTMLElement}function T(t){return t instanceof E(t).Element}function ut(t){return typeof ShadowRoot>"u"?!1:t instanceof E(t).ShadowRoot||t instanceof ShadowRoot}function I(t){const{overflow:e,overflowX:n,overflowY:o,display:c}=P(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(c)}function Wt(t){return["table","td","th"].includes(V(t))}function rt(t){const e=/firefox/i.test(wt()),n=P(t),o=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!o&&o!=="none"||e&&n.willChange==="filter"||e&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(c=>n.willChange.includes(c))||["paint","layout","strict","content"].some(c=>{const l=n.contain;return l!=null&&l.includes(c)})}function lt(){return/^((?!chrome|android).)*safari/i.test(wt())}function tt(t){return["html","body","#document"].includes(V(t))}const dt=Math.min,q=Math.max,Z=Math.round;function vt(t){const e=P(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const c=$(t),l=c?t.offsetWidth:n,i=c?t.offsetHeight:o,r=Z(n)!==l||Z(o)!==i;return r&&(n=l,o=i),{width:n,height:o,fallback:r}}function bt(t){return T(t)?t:t.contextElement}const Rt={x:1,y:1};function j(t){const e=bt(t);if(!$(e))return Rt;const n=e.getBoundingClientRect(),{width:o,height:c,fallback:l}=vt(e);let i=(l?Z(n.width):n.width)/o,r=(l?Z(n.height):n.height)/c;return i&&Number.isFinite(i)||(i=1),r&&Number.isFinite(r)||(r=1),{x:i,y:r}}function N(t,e,n,o){var c,l;e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=bt(t);let s=Rt;e&&(o?T(o)&&(s=j(o)):s=j(t));const a=r?E(r):window,u=lt()&&n;let f=(i.left+(u&&((c=a.visualViewport)==null?void 0:c.offsetLeft)||0))/s.x,d=(i.top+(u&&((l=a.visualViewport)==null?void 0:l.offsetTop)||0))/s.y,m=i.width/s.x,g=i.height/s.y;if(r){const h=E(r),x=o&&T(o)?E(o):o;let p=h.frameElement;for(;p&&o&&x!==h;){const y=j(p),w=p.getBoundingClientRect(),R=getComputedStyle(p);w.x+=(p.clientLeft+parseFloat(R.paddingLeft))*y.x,w.y+=(p.clientTop+parseFloat(R.paddingTop))*y.y,f*=y.x,d*=y.y,m*=y.x,g*=y.y,f+=w.x,d+=w.y,p=E(p).frameElement}}return Q({width:m,height:g,x:f,y:d})}function H(t){return((xt(t)?t.ownerDocument:t.document)||window.document).documentElement}function et(t){return T(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Lt(t){return N(H(t)).left+et(t).scrollLeft}function X(t){if(V(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ut(t)&&t.host||H(t);return ut(e)?e.host:e}function Et(t){const e=X(t);return tt(e)?e.ownerDocument.body:$(e)&&I(e)?e:Et(e)}function G(t,e){var n;e===void 0&&(e=[]);const o=Et(t),c=o===((n=t.ownerDocument)==null?void 0:n.body),l=E(o);return c?e.concat(l,l.visualViewport||[],I(o)?o:[]):e.concat(o,G(o))}function mt(t,e,n){let o;if(e==="viewport")o=function(i,r){const s=E(i),a=H(i),u=s.visualViewport;let f=a.clientWidth,d=a.clientHeight,m=0,g=0;if(u){f=u.width,d=u.height;const h=lt();(!h||h&&r==="fixed")&&(m=u.offsetLeft,g=u.offsetTop)}return{width:f,height:d,x:m,y:g}}(t,n);else if(e==="document")o=function(i){const r=H(i),s=et(i),a=i.ownerDocument.body,u=q(r.scrollWidth,r.clientWidth,a.scrollWidth,a.clientWidth),f=q(r.scrollHeight,r.clientHeight,a.scrollHeight,a.clientHeight);let d=-s.scrollLeft+Lt(i);const m=-s.scrollTop;return P(a).direction==="rtl"&&(d+=q(r.clientWidth,a.clientWidth)-u),{width:u,height:f,x:d,y:m}}(H(t));else if(T(e))o=function(i,r){const s=N(i,!0,r==="fixed"),a=s.top+i.clientTop,u=s.left+i.clientLeft,f=$(i)?j(i):{x:1,y:1};return{width:i.clientWidth*f.x,height:i.clientHeight*f.y,x:u*f.x,y:a*f.y}}(e,n);else{const i={...e};if(lt()){var c,l;const r=E(t);i.x-=((c=r.visualViewport)==null?void 0:c.offsetLeft)||0,i.y-=((l=r.visualViewport)==null?void 0:l.offsetTop)||0}o=i}return Q(o)}function Tt(t,e){const n=X(t);return!(n===e||!T(n)||tt(n))&&(P(n).position==="fixed"||Tt(n,e))}function ht(t,e){return $(t)&&P(t).position!=="fixed"?e?e(t):t.offsetParent:null}function gt(t,e){const n=E(t);if(!$(t))return n;let o=ht(t,e);for(;o&&Wt(o)&&P(o).position==="static";)o=ht(o,e);return o&&(V(o)==="html"||V(o)==="body"&&P(o).position==="static"&&!rt(o))?n:o||function(c){let l=X(c);for(;$(l)&&!tt(l);){if(rt(l))return l;l=X(l)}return null}(t)||n}function Ht(t,e,n){const o=$(e),c=H(e),l=N(t,!0,n==="fixed",e);let i={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if(o||!o&&n!=="fixed")if((V(e)!=="body"||I(c))&&(i=et(e)),$(e)){const s=N(e,!0);r.x=s.x+e.clientLeft,r.y=s.y+e.clientTop}else c&&(r.x=Lt(c));return{x:l.left+i.scrollLeft-r.x,y:l.top+i.scrollTop-r.y,width:l.width,height:l.height}}const Vt={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:c}=t;const l=n==="clippingAncestors"?function(a,u){const f=u.get(a);if(f)return f;let d=G(a).filter(x=>T(x)&&V(x)!=="body"),m=null;const g=P(a).position==="fixed";let h=g?X(a):a;for(;T(h)&&!tt(h);){const x=P(h),p=rt(h);p||x.position!=="fixed"||(m=null),(g?!p&&!m:!p&&x.position==="static"&&m&&["absolute","fixed"].includes(m.position)||I(h)&&!p&&Tt(a,h))?d=d.filter(y=>y!==h):m=x,h=X(h)}return u.set(a,d),d}(e,this._c):[].concat(n),i=[...l,o],r=i[0],s=i.reduce((a,u)=>{const f=mt(e,u,c);return a.top=q(f.top,a.top),a.right=dt(f.right,a.right),a.bottom=dt(f.bottom,a.bottom),a.left=q(f.left,a.left),a},mt(e,r,c));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const c=$(n),l=H(n);if(n===l)return e;let i={scrollLeft:0,scrollTop:0},r={x:1,y:1};const s={x:0,y:0};if((c||!c&&o!=="fixed")&&((V(n)!=="body"||I(l))&&(i=et(n)),$(n))){const a=N(n);r=j(n),s.x=a.x+n.clientLeft,s.y=a.y+n.clientTop}return{width:e.width*r.x,height:e.height*r.y,x:e.x*r.x-i.scrollLeft*r.x+s.x,y:e.y*r.y-i.scrollTop*r.y+s.y}},isElement:T,getDimensions:function(t){return vt(t)},getOffsetParent:gt,getDocumentElement:H,getScale:j,async getElementRects(t){let{reference:e,floating:n,strategy:o}=t;const c=this.getOffsetParent||gt,l=this.getDimensions;return{reference:Ht(e,await c(n),o),floating:{x:0,y:0,...await l(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>P(t).direction==="rtl"};function jt(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:c=!0,ancestorResize:l=!0,elementResize:i=!0,animationFrame:r=!1}=o,s=c||l?[...T(t)?G(t):t.contextElement?G(t.contextElement):[],...G(e)]:[];s.forEach(d=>{const m=!T(d)&&d.toString().includes("V");!c||r&&!m||d.addEventListener("scroll",n,{passive:!0}),l&&d.addEventListener("resize",n)});let a,u=null;i&&(u=new ResizeObserver(()=>{n()}),T(t)&&!r&&u.observe(t),T(t)||!t.contextElement||r||u.observe(t.contextElement),u.observe(e));let f=r?N(t):null;return r&&function d(){const m=N(t);!f||m.x===f.x&&m.y===f.y&&m.width===f.width&&m.height===f.height||n(),f=m,a=requestAnimationFrame(d)}(),n(),()=>{var d;s.forEach(m=>{c&&m.removeEventListener("scroll",n),l&&m.removeEventListener("resize",n)}),(d=u)==null||d.disconnect(),u=null,r&&cancelAnimationFrame(a)}}const Xt=(t,e,n)=>{const o=new Map,c={platform:Vt,...n},l={...c.platform,_c:o};return $t(t,e,{...c,platform:l})};export{Nt as B,Mt as D,zt as b,Xt as k,Bt as u,jt as z};
