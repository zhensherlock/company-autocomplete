function q(t){return t.split("-")[1]}function st(t){return t==="y"?"height":"width"}function I(t){return t.split("-")[0]}function Q(t){return["top","bottom"].includes(I(t))?"x":"y"}function ht(t,e,o){let{reference:n,floating:r}=t;const i=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2,a=Q(e),c=st(a),s=n[c]/2-r[c]/2,m=a==="x";let u;switch(I(e)){case"top":u={x:i,y:n.y-r.height};break;case"bottom":u={x:i,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:l};break;case"left":u={x:n.x-r.width,y:l};break;default:u={x:n.x,y:n.y}}switch(q(e)){case"start":u[a]-=s*(o&&m?-1:1);break;case"end":u[a]+=s*(o&&m?-1:1)}return u}const Ct=async(t,e,o)=>{const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:l}=o,a=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(e));let s=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y:u}=ht(s,n,c),p=n,d={},h=0;for(let f=0;f<a.length;f++){const{name:g,fn:w}=a[f],{x:y,y:x,data:L,reset:b}=await w({x:m,y:u,initialPlacement:n,placement:p,strategy:r,middlewareData:d,rects:s,platform:l,elements:{reference:t,floating:e}});m=y??m,u=x??u,d={...d,[g]:{...d[g],...L}},b&&h<=50&&(h++,typeof b=="object"&&(b.placement&&(p=b.placement),b.rects&&(s=b.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:r}):b.rects),{x:m,y:u}=ht(s,p,c)),f=-1)}return{x:m,y:u,placement:p,strategy:r,middlewareData:d}};function U(t,e){return typeof t=="function"?t(e):t}function vt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function tt(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function bt(t,e){var o;e===void 0&&(e={});const{x:n,y:r,platform:i,rects:l,elements:a,strategy:c}=t,{boundary:s="clippingAncestors",rootBoundary:m="viewport",elementContext:u="floating",altBoundary:p=!1,padding:d=0}=U(e,t),h=vt(d),f=a[p?u==="floating"?"reference":"floating":u],g=tt(await i.getClippingRect({element:(o=await(i.isElement==null?void 0:i.isElement(f)))==null||o?f:f.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:s,rootBoundary:m,strategy:c})),w=u==="floating"?{...l.floating,x:n,y:r}:l.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(y))&&await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1},L=tt(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:y,strategy:c}):w);return{top:(g.top-L.top+h.top)/x.y,bottom:(L.bottom-g.bottom+h.bottom)/x.y,left:(g.left-L.left+h.left)/x.x,right:(L.right-g.right+h.right)/x.x}}const J=Math.min,N=Math.max;function Ot(t,e,o){return N(t,J(e,o))}const zt=t=>({name:"arrow",options:t,async fn(e){const{x:o,y:n,placement:r,rects:i,platform:l,elements:a}=e,{element:c,padding:s=0}=U(t,e)||{};if(c==null)return{};const m=vt(s),u={x:o,y:n},p=Q(r),d=st(p),h=await l.getDimensions(c),f=p==="y",g=f?"top":"left",w=f?"bottom":"right",y=f?"clientHeight":"clientWidth",x=i.reference[d]+i.reference[p]-u[p]-i.floating[d],L=u[p]-i.reference[p],b=await(l.getOffsetParent==null?void 0:l.getOffsetParent(c));let v=b?b[y]:0;v&&await(l.isElement==null?void 0:l.isElement(b))||(v=a.floating[y]||i.floating[d]);const E=x/2-L/2,C=v/2-h[d]/2-1,O=J(m[g],C),M=J(m[w],C),R=O,D=v-h[d]-M,T=v/2-h[d]/2+E,$=Ot(R,T,D),S=q(r)!=null&&T!=$&&i.reference[d]/2-(T<R?O:M)-h[d]/2<0?T<R?R-T:D-T:0;return{[p]:u[p]-S,data:{[p]:$,centerOffset:T-$+S}}}}),kt=["top","right","bottom","left"];kt.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Ft={left:"right",right:"left",bottom:"top",top:"bottom"};function et(t){return t.replace(/left|right|bottom|top/g,e=>Ft[e])}function Wt(t,e,o){o===void 0&&(o=!1);const n=q(t),r=Q(t),i=st(r);let l=r==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=et(l)),{main:l,cross:et(l)}}const Ht={start:"end",end:"start"};function lt(t){return t.replace(/start|end/g,e=>Ht[e])}const Nt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o;const{placement:n,middlewareData:r,rects:i,initialPlacement:l,platform:a,elements:c}=e,{mainAxis:s=!0,crossAxis:m=!0,fallbackPlacements:u,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:h=!0,...f}=U(t,e),g=I(n),w=I(l)===l,y=await(a.isRTL==null?void 0:a.isRTL(c.floating)),x=u||(w||!h?[et(l)]:function(R){const D=et(R);return[lt(R),D,lt(D)]}(l));u||d==="none"||x.push(...function(R,D,T,$){const S=q(R);let A=function(V,z,$t){const ut=["left","right"],dt=["right","left"],St=["top","bottom"],Pt=["bottom","top"];switch(V){case"top":case"bottom":return $t?z?dt:ut:z?ut:dt;case"left":case"right":return z?St:Pt;default:return[]}}(I(R),T==="start",$);return S&&(A=A.map(V=>V+"-"+S),D&&(A=A.concat(A.map(lt)))),A}(l,h,d,y));const L=[l,...x],b=await bt(e,f),v=[];let E=((o=r.flip)==null?void 0:o.overflows)||[];if(s&&v.push(b[g]),m){const{main:R,cross:D}=Wt(n,i,y);v.push(b[R],b[D])}if(E=[...E,{placement:n,overflows:v}],!v.every(R=>R<=0)){var C,O;const R=(((C=r.flip)==null?void 0:C.index)||0)+1,D=L[R];if(D)return{data:{index:R,overflows:E},reset:{placement:D}};let T=(O=E.filter($=>$.overflows[0]<=0).sort(($,S)=>$.overflows[1]-S.overflows[1])[0])==null?void 0:O.placement;if(!T)switch(p){case"bestFit":{var M;const $=(M=E.map(S=>[S.placement,S.overflows.filter(A=>A>0).reduce((A,V)=>A+V,0)]).sort((S,A)=>S[1]-A[1])[0])==null?void 0:M[0];$&&(T=$);break}case"initialPlacement":T=l}if(n!==T)return{reset:{placement:T}}}return{}}}},It=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:o,y:n}=e,r=await async function(i,l){const{placement:a,platform:c,elements:s}=i,m=await(c.isRTL==null?void 0:c.isRTL(s.floating)),u=I(a),p=q(a),d=Q(a)==="x",h=["left","top"].includes(u)?-1:1,f=m&&d?-1:1,g=U(l,i);let{mainAxis:w,crossAxis:y,alignmentAxis:x}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return p&&typeof x=="number"&&(y=p==="end"?-1*x:x),d?{x:y*f,y:w*h}:{x:w*h,y:y*f}}(e,t);return{x:o+r.x,y:n+r.y,data:r}}}},Xt=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:o,rects:n,platform:r,elements:i}=e,{apply:l=()=>{},...a}=U(t,e),c=await bt(e,a),s=I(o),m=q(o),u=Q(o)==="x",{width:p,height:d}=n.floating;let h,f;s==="top"||s==="bottom"?(h=s,f=m===(await(r.isRTL==null?void 0:r.isRTL(i.floating))?"start":"end")?"left":"right"):(f=s,h=m==="end"?"top":"bottom");const g=d-c[h],w=p-c[f],y=!e.middlewareData.shift;let x=g,L=w;if(u){const v=p-c.left-c.right;L=m||y?J(w,v):v}else{const v=d-c.top-c.bottom;x=m||y?J(g,v):v}if(y&&!m){const v=N(c.left,0),E=N(c.right,0),C=N(c.top,0),O=N(c.bottom,0);u?L=p-2*(v!==0||E!==0?v+E:N(c.left,c.right)):x=d-2*(C!==0||O!==0?C+O:N(c.top,c.bottom))}await l({...e,availableWidth:L,availableHeight:x});const b=await r.getDimensions(i.floating);return p!==b.width||d!==b.height?{reset:{rects:!0}}:{}}}};function P(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function k(t){return P(t).getComputedStyle(t)}function Rt(t){return t instanceof P(t).Node}function B(t){return Rt(t)?(t.nodeName||"").toLowerCase():"#document"}function F(t){return t instanceof P(t).HTMLElement}function W(t){return t instanceof P(t).Element}function mt(t){return typeof ShadowRoot<"u"&&(t instanceof P(t).ShadowRoot||t instanceof ShadowRoot)}function K(t){const{overflow:e,overflowX:o,overflowY:n,display:r}=k(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(r)}function Mt(t){return["table","td","th"].includes(B(t))}function ct(t){const e=at(),o=k(t);return o.transform!=="none"||o.perspective!=="none"||!e&&!!o.backdropFilter&&o.backdropFilter!=="none"||!e&&!!o.filter&&o.filter!=="none"||["transform","perspective","filter"].some(n=>(o.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(o.contain||"").includes(n))}function at(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function it(t){return["html","body","#document"].includes(B(t))}const pt=Math.min,G=Math.max,nt=Math.round,Z=Math.floor,X=t=>({x:t,y:t});function Lt(t){const e=k(t);let o=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=F(t),i=r?t.offsetWidth:o,l=r?t.offsetHeight:n,a=nt(o)!==i||nt(n)!==l;return a&&(o=i,n=l),{width:o,height:n,$:a}}function ft(t){return W(t)?t:t.contextElement}function _(t){const e=ft(t);if(!F(e))return X(1);const o=e.getBoundingClientRect(),{width:n,height:r,$:i}=Lt(e);let l=(i?nt(o.width):o.width)/n,a=(i?nt(o.height):o.height)/r;return l&&Number.isFinite(l)||(l=1),a&&Number.isFinite(a)||(a=1),{x:l,y:a}}const gt=X(0);function Tt(t,e,o){var n,r;if(e===void 0&&(e=!0),!at())return gt;const i=t?P(t):window;return!o||e&&o!==i?gt:{x:((n=i.visualViewport)==null?void 0:n.offsetLeft)||0,y:((r=i.visualViewport)==null?void 0:r.offsetTop)||0}}function Y(t,e,o,n){e===void 0&&(e=!1),o===void 0&&(o=!1);const r=t.getBoundingClientRect(),i=ft(t);let l=X(1);e&&(n?W(n)&&(l=_(n)):l=_(t));const a=Tt(i,o,n);let c=(r.left+a.x)/l.x,s=(r.top+a.y)/l.y,m=r.width/l.x,u=r.height/l.y;if(i){const p=P(i),d=n&&W(n)?P(n):n;let h=p.frameElement;for(;h&&n&&d!==p;){const f=_(h),g=h.getBoundingClientRect(),w=getComputedStyle(h),y=g.left+(h.clientLeft+parseFloat(w.paddingLeft))*f.x,x=g.top+(h.clientTop+parseFloat(w.paddingTop))*f.y;c*=f.x,s*=f.y,m*=f.x,u*=f.y,c+=y,s+=x,h=P(h).frameElement}}return tt({width:m,height:u,x:c,y:s})}function H(t){return((Rt(t)?t.ownerDocument:t.document)||window.document).documentElement}function rt(t){return W(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Et(t){return Y(H(t)).left+rt(t).scrollLeft}function j(t){if(B(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mt(t)&&t.host||H(t);return mt(e)?e.host:e}function At(t){const e=j(t);return it(e)?t.ownerDocument?t.ownerDocument.body:t.body:F(e)&&K(e)?e:At(e)}function ot(t,e){var o;e===void 0&&(e=[]);const n=At(t),r=n===((o=t.ownerDocument)==null?void 0:o.body),i=P(n);return r?e.concat(i,i.visualViewport||[],K(n)?n:[]):e.concat(n,ot(n))}function yt(t,e,o){let n;if(e==="viewport")n=function(r,i){const l=P(r),a=H(r),c=l.visualViewport;let s=a.clientWidth,m=a.clientHeight,u=0,p=0;if(c){s=c.width,m=c.height;const d=at();(!d||d&&i==="fixed")&&(u=c.offsetLeft,p=c.offsetTop)}return{width:s,height:m,x:u,y:p}}(t,o);else if(e==="document")n=function(r){const i=H(r),l=rt(r),a=r.ownerDocument.body,c=G(i.scrollWidth,i.clientWidth,a.scrollWidth,a.clientWidth),s=G(i.scrollHeight,i.clientHeight,a.scrollHeight,a.clientHeight);let m=-l.scrollLeft+Et(r);const u=-l.scrollTop;return k(a).direction==="rtl"&&(m+=G(i.clientWidth,a.clientWidth)-c),{width:c,height:s,x:m,y:u}}(H(t));else if(W(e))n=function(r,i){const l=Y(r,!0,i==="fixed"),a=l.top+r.clientTop,c=l.left+r.clientLeft,s=F(r)?_(r):X(1);return{width:r.clientWidth*s.x,height:r.clientHeight*s.y,x:c*s.x,y:a*s.y}}(e,o);else{const r=Tt(t);n={...e,x:e.x-r.x,y:e.y-r.y}}return tt(n)}function Dt(t,e){const o=j(t);return!(o===e||!W(o)||it(o))&&(k(o).position==="fixed"||Dt(o,e))}function wt(t,e){return F(t)&&k(t).position!=="fixed"?e?e(t):t.offsetParent:null}function xt(t,e){const o=P(t);if(!F(t))return o;let n=wt(t,e);for(;n&&Mt(n)&&k(n).position==="static";)n=wt(n,e);return n&&(B(n)==="html"||B(n)==="body"&&k(n).position==="static"&&!ct(n))?o:n||function(r){let i=j(r);for(;F(i)&&!it(i);){if(ct(i))return i;i=j(i)}return null}(t)||o}function Bt(t,e,o){const n=F(e),r=H(e),i=o==="fixed",l=Y(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=X(0);if(n||!n&&!i)if((B(e)!=="body"||K(r))&&(a=rt(e)),F(e)){const s=Y(e,!0,i,e);c.x=s.x+e.clientLeft,c.y=s.y+e.clientTop}else r&&(c.x=Et(r));return{x:l.left+a.scrollLeft-c.x,y:l.top+a.scrollTop-c.y,width:l.width,height:l.height}}const Vt={getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:n,strategy:r}=t;const i=o==="clippingAncestors"?function(s,m){const u=m.get(s);if(u)return u;let p=ot(s).filter(g=>W(g)&&B(g)!=="body"),d=null;const h=k(s).position==="fixed";let f=h?j(s):s;for(;W(f)&&!it(f);){const g=k(f),w=ct(f);w||g.position!=="fixed"||(d=null),(h?!w&&!d:!w&&g.position==="static"&&d&&["absolute","fixed"].includes(d.position)||K(f)&&!w&&Dt(s,f))?p=p.filter(y=>y!==f):d=g,f=j(f)}return m.set(s,p),p}(e,this._c):[].concat(o),l=[...i,n],a=l[0],c=l.reduce((s,m)=>{const u=yt(e,m,r);return s.top=G(u.top,s.top),s.right=pt(u.right,s.right),s.bottom=pt(u.bottom,s.bottom),s.left=G(u.left,s.left),s},yt(e,a,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const r=F(o),i=H(o);if(o===i)return e;let l={scrollLeft:0,scrollTop:0},a=X(1);const c=X(0);if((r||!r&&n!=="fixed")&&((B(o)!=="body"||K(i))&&(l=rt(o)),F(o))){const s=Y(o);a=_(o),c.x=s.x+o.clientLeft,c.y=s.y+o.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-l.scrollLeft*a.x+c.x,y:e.y*a.y-l.scrollTop*a.y+c.y}},isElement:W,getDimensions:function(t){return Lt(t)},getOffsetParent:xt,getDocumentElement:H,getScale:_,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t;const r=this.getOffsetParent||xt,i=this.getDimensions;return{reference:Bt(e,await r(o),n),floating:{x:0,y:0,...await i(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>k(t).direction==="rtl"};function Yt(t,e,o,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:l=!0,layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,s=ft(t),m=r||i?[...s?ot(s):[],...ot(e)]:[];m.forEach(f=>{r&&f.addEventListener("scroll",o,{passive:!0}),i&&f.addEventListener("resize",o)});const u=s&&a?function(f,g){let w,y=null;const x=H(f);function L(){clearTimeout(w),y&&y.disconnect(),y=null}return function b(v,E){v===void 0&&(v=!1),E===void 0&&(E=1),L();const{left:C,top:O,width:M,height:R}=f.getBoundingClientRect();if(v||g(),!M||!R)return;const D=Z(O),T=Z(x.clientWidth-(C+M)),$=Z(x.clientHeight-(O+R)),S=Z(C);let A=!0;y=new IntersectionObserver(V=>{const z=V[0].intersectionRatio;if(z!==E){if(!A)return b();z===0?w=setTimeout(()=>{b(!1,1e-7)},100):b(!1,z)}A=!1},{rootMargin:-D+"px "+-T+"px "+-$+"px "+-S+"px",threshold:E}),y.observe(f)}(!0),L}(s,o):null;let p,d=null;l&&(d=new ResizeObserver(o),s&&!c&&d.observe(s),d.observe(e));let h=c?Y(t):null;return c&&function f(){const g=Y(t);!h||g.x===h.x&&g.y===h.y&&g.width===h.width&&g.height===h.height||o(),h=g,p=requestAnimationFrame(f)}(),o(),()=>{m.forEach(f=>{r&&f.removeEventListener("scroll",o),i&&f.removeEventListener("resize",o)}),u&&u(),d&&d.disconnect(),d=null,c&&cancelAnimationFrame(p)}}const _t=(t,e,o)=>{const n=new Map,r={platform:Vt,...o},i={...r.platform,_c:n};return Ct(t,e,{...r,platform:i})};export{Nt as A,Yt as B,Xt as C,It as L,_t as N,zt as g};
