function X(t){return t.split("-")[1]}function it(t){return t==="y"?"height":"width"}function Y(t){return t.split("-")[0]}function _(t){return["top","bottom"].includes(Y(t))?"x":"y"}function U(t,e,n){let{reference:o,floating:s}=t;const r=o.x+o.width/2-s.width/2,l=o.y+o.height/2-s.height/2,i=_(e),c=it(i),a=o[c]/2-s[c]/2,u=i==="x";let f;switch(Y(e)){case"top":f={x:r,y:o.y-s.height};break;case"bottom":f={x:r,y:o.y+o.height};break;case"right":f={x:o.x+o.width,y:l};break;case"left":f={x:o.x-s.width,y:l};break;default:f={x:o.x,y:o.y}}switch(X(e)){case"start":f[i]-=a*(n&&u?-1:1);break;case"end":f[i]+=a*(n&&u?-1:1)}return f}const mt=async(t,e,n)=>{const{placement:o="bottom",strategy:s="absolute",middleware:r=[],platform:l}=n,i=r.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(e));let a=await l.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:f}=U(a,o,c),d=o,h={},m=0;for(let g=0;g<i.length;g++){const{name:y,fn:p}=i[g],{x,y:w,data:v,reset:b}=await p({x:u,y:f,initialPlacement:o,placement:d,strategy:s,middlewareData:h,rects:a,platform:l,elements:{reference:t,floating:e}});u=x??u,f=w??f,h={...h,[y]:{...h[y],...v}},b&&m<=50&&(m++,typeof b=="object"&&(b.placement&&(d=b.placement),b.rects&&(a=b.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:s}):b.rects),{x:u,y:f}=U(a,d,c)),g=-1)}return{x:u,y:f,placement:d,strategy:s,middlewareData:h}};function rt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function N(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function pt(t,e){var n;e===void 0&&(e={});const{x:o,y:s,platform:r,rects:l,elements:i,strategy:c}=t,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=e,m=rt(h),g=i[d?f==="floating"?"reference":"floating":f],y=N(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(g)))==null||n?g:g.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(i.floating)),boundary:a,rootBoundary:u,strategy:c})),p=f==="floating"?{...l.floating,x:o,y:s}:l.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(i.floating)),w=await(r.isElement==null?void 0:r.isElement(x))&&await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1},v=N(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:p,offsetParent:x,strategy:c}):p);return{top:(y.top-v.top+m.top)/w.y,bottom:(v.bottom-y.bottom+m.bottom)/w.y,left:(y.left-v.left+m.left)/w.x,right:(v.right-y.right+m.right)/w.x}}const J=Math.min,W=Math.max;function yt(t,e,n){return W(t,J(e,n))}const Rt=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:o=0}=t||{},{x:s,y:r,placement:l,rects:i,platform:c,elements:a}=e;if(n==null)return{};const u=rt(o),f={x:s,y:r},d=_(l),h=it(d),m=await c.getDimensions(n),g=d==="y",y=g?"top":"left",p=g?"bottom":"right",x=g?"clientHeight":"clientWidth",w=i.reference[h]+i.reference[d]-f[d]-i.floating[h],v=f[d]-i.reference[d],b=await(c.getOffsetParent==null?void 0:c.getOffsetParent(n));let R=b?b[x]:0;R&&await(c.isElement==null?void 0:c.isElement(b))||(R=a.floating[x]||i.floating[h]);const z=w/2-v/2,C=u[y],H=R-m[h]-u[p],O=R/2-m[h]/2+z,I=yt(C,O,H),gt=X(l)!=null&&O!=I&&i.reference[h]/2-(O<C?u[y]:u[p])-m[h]/2<0;return{[d]:f[d]-(gt?O<C?C-O:H-O:0),data:{[d]:I,centerOffset:O-I}}}}),xt=["top","right","bottom","left"];xt.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Et=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,s=await async function(r,l){const{placement:i,platform:c,elements:a}=r,u=await(c.isRTL==null?void 0:c.isRTL(a.floating)),f=Y(i),d=X(i),h=_(i)==="x",m=["left","top"].includes(f)?-1:1,g=u&&h?-1:1,y=typeof l=="function"?l(r):l;let{mainAxis:p,crossAxis:x,alignmentAxis:w}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...y};return d&&typeof w=="number"&&(x=d==="end"?-1*w:w),h?{x:x*g,y:p*m}:{x:p*m,y:x*g}}(e,t);return{x:n+s.x,y:o+s.y,data:s}}}},Lt=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:o,platform:s,elements:r}=e,{apply:l=()=>{},...i}=t,c=await pt(e,i),a=Y(n),u=X(n),f=_(n)==="x",{width:d,height:h}=o.floating;let m,g;a==="top"||a==="bottom"?(m=a,g=u===(await(s.isRTL==null?void 0:s.isRTL(r.floating))?"start":"end")?"left":"right"):(g=a,m=u==="end"?"top":"bottom");const y=h-c[m],p=d-c[g],x=!e.middlewareData.shift;let w=y,v=p;if(f){const R=d-c.left-c.right;v=u||x?J(p,R):R}else{const R=h-c.top-c.bottom;w=u||x?J(y,R):R}if(x&&!u){const R=W(c.left,0),z=W(c.right,0),C=W(c.top,0),H=W(c.bottom,0);f?v=d-2*(R!==0||z!==0?R+z:W(c.left,c.right)):w=h-2*(C!==0||H!==0?C+H:W(c.top,c.bottom))}await l({...e,availableWidth:v,availableHeight:w});const b=await s.getDimensions(r.floating);return d!==b.width||h!==b.height?{reset:{rects:!0}}:{}}}};function E(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function T(t){return E(t).getComputedStyle(t)}function lt(t){return t instanceof E(t).Node}function P(t){return lt(t)?(t.nodeName||"").toLowerCase():""}let M;function ct(){if(M)return M;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(M=t.brands.map(e=>e.brand+"/"+e.version).join(" "),M):navigator.userAgent}function A(t){return t instanceof E(t).HTMLElement}function L(t){return t instanceof E(t).Element}function Z(t){return typeof ShadowRoot>"u"?!1:t instanceof E(t).ShadowRoot||t instanceof ShadowRoot}function B(t){const{overflow:e,overflowX:n,overflowY:o,display:s}=T(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(s)}function wt(t){return["table","td","th"].includes(P(t))}function K(t){const e=/firefox/i.test(ct()),n=T(t),o=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!o&&o!=="none"||e&&n.willChange==="filter"||e&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(s=>n.willChange.includes(s))||["paint","layout","strict","content"].some(s=>{const r=n.contain;return r!=null&&r.includes(s)})}function Q(){return/^((?!chrome|android).)*safari/i.test(ct())}function q(t){return["html","body","#document"].includes(P(t))}const tt=Math.min,S=Math.max,j=Math.round;function st(t){const e=T(t);let n=parseFloat(e.width),o=parseFloat(e.height);const s=A(t),r=s?t.offsetWidth:n,l=s?t.offsetHeight:o,i=j(n)!==r||j(o)!==l;return i&&(n=r,o=l),{width:n,height:o,fallback:i}}function at(t){return L(t)?t:t.contextElement}const ft={x:1,y:1};function k(t){const e=at(t);if(!A(e))return ft;const n=e.getBoundingClientRect(),{width:o,height:s,fallback:r}=st(e);let l=(r?j(n.width):n.width)/o,i=(r?j(n.height):n.height)/s;return l&&Number.isFinite(l)||(l=1),i&&Number.isFinite(i)||(i=1),{x:l,y:i}}function $(t,e,n,o){var s,r;e===void 0&&(e=!1),n===void 0&&(n=!1);const l=t.getBoundingClientRect(),i=at(t);let c=ft;e&&(o?L(o)&&(c=k(o)):c=k(t));const a=i?E(i):window,u=Q()&&n;let f=(l.left+(u&&((s=a.visualViewport)==null?void 0:s.offsetLeft)||0))/c.x,d=(l.top+(u&&((r=a.visualViewport)==null?void 0:r.offsetTop)||0))/c.y,h=l.width/c.x,m=l.height/c.y;if(i){const g=E(i),y=o&&L(o)?E(o):o;let p=g.frameElement;for(;p&&o&&y!==g;){const x=k(p),w=p.getBoundingClientRect(),v=getComputedStyle(p);w.x+=(p.clientLeft+parseFloat(v.paddingLeft))*x.x,w.y+=(p.clientTop+parseFloat(v.paddingTop))*x.y,f*=x.x,d*=x.y,h*=x.x,m*=x.y,f+=w.x,d+=w.y,p=E(p).frameElement}}return N({width:h,height:m,x:f,y:d})}function D(t){return((lt(t)?t.ownerDocument:t.document)||window.document).documentElement}function G(t){return L(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ut(t){return $(D(t)).left+G(t).scrollLeft}function F(t){if(P(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Z(t)&&t.host||D(t);return Z(e)?e.host:e}function dt(t){const e=F(t);return q(e)?e.ownerDocument.body:A(e)&&B(e)?e:dt(e)}function V(t,e){var n;e===void 0&&(e=[]);const o=dt(t),s=o===((n=t.ownerDocument)==null?void 0:n.body),r=E(o);return s?e.concat(r,r.visualViewport||[],B(o)?o:[]):e.concat(o,V(o))}function et(t,e,n){let o;if(e==="viewport")o=function(l,i){const c=E(l),a=D(l),u=c.visualViewport;let f=a.clientWidth,d=a.clientHeight,h=0,m=0;if(u){f=u.width,d=u.height;const g=Q();(!g||g&&i==="fixed")&&(h=u.offsetLeft,m=u.offsetTop)}return{width:f,height:d,x:h,y:m}}(t,n);else if(e==="document")o=function(l){const i=D(l),c=G(l),a=l.ownerDocument.body,u=S(i.scrollWidth,i.clientWidth,a.scrollWidth,a.clientWidth),f=S(i.scrollHeight,i.clientHeight,a.scrollHeight,a.clientHeight);let d=-c.scrollLeft+ut(l);const h=-c.scrollTop;return T(a).direction==="rtl"&&(d+=S(i.clientWidth,a.clientWidth)-u),{width:u,height:f,x:d,y:h}}(D(t));else if(L(e))o=function(l,i){const c=$(l,!0,i==="fixed"),a=c.top+l.clientTop,u=c.left+l.clientLeft,f=A(l)?k(l):{x:1,y:1};return{width:l.clientWidth*f.x,height:l.clientHeight*f.y,x:u*f.x,y:a*f.y}}(e,n);else{const l={...e};if(Q()){var s,r;const i=E(t);l.x-=((s=i.visualViewport)==null?void 0:s.offsetLeft)||0,l.y-=((r=i.visualViewport)==null?void 0:r.offsetTop)||0}o=l}return N(o)}function ht(t,e){const n=F(t);return!(n===e||!L(n)||q(n))&&(T(n).position==="fixed"||ht(n,e))}function nt(t,e){return A(t)&&T(t).position!=="fixed"?e?e(t):t.offsetParent:null}function ot(t,e){const n=E(t);if(!A(t))return n;let o=nt(t,e);for(;o&&wt(o)&&T(o).position==="static";)o=nt(o,e);return o&&(P(o)==="html"||P(o)==="body"&&T(o).position==="static"&&!K(o))?n:o||function(s){let r=F(s);for(;A(r)&&!q(r);){if(K(r))return r;r=F(r)}return null}(t)||n}function vt(t,e,n){const o=A(e),s=D(e),r=$(t,!0,n==="fixed",e);let l={scrollLeft:0,scrollTop:0};const i={x:0,y:0};if(o||!o&&n!=="fixed")if((P(e)!=="body"||B(s))&&(l=G(e)),A(e)){const c=$(e,!0);i.x=c.x+e.clientLeft,i.y=c.y+e.clientTop}else s&&(i.x=ut(s));return{x:r.left+l.scrollLeft-i.x,y:r.top+l.scrollTop-i.y,width:r.width,height:r.height}}const bt={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:s}=t;const r=n==="clippingAncestors"?function(a,u){const f=u.get(a);if(f)return f;let d=V(a).filter(y=>L(y)&&P(y)!=="body"),h=null;const m=T(a).position==="fixed";let g=m?F(a):a;for(;L(g)&&!q(g);){const y=T(g),p=K(g);p||y.position!=="fixed"||(h=null),(m?!p&&!h:!p&&y.position==="static"&&h&&["absolute","fixed"].includes(h.position)||B(g)&&!p&&ht(a,g))?d=d.filter(x=>x!==g):h=y,g=F(g)}return u.set(a,d),d}(e,this._c):[].concat(n),l=[...r,o],i=l[0],c=l.reduce((a,u)=>{const f=et(e,u,s);return a.top=S(f.top,a.top),a.right=tt(f.right,a.right),a.bottom=tt(f.bottom,a.bottom),a.left=S(f.left,a.left),a},et(e,i,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const s=A(n),r=D(n);if(n===r)return e;let l={scrollLeft:0,scrollTop:0},i={x:1,y:1};const c={x:0,y:0};if((s||!s&&o!=="fixed")&&((P(n)!=="body"||B(r))&&(l=G(n)),A(n))){const a=$(n);i=k(n),c.x=a.x+n.clientLeft,c.y=a.y+n.clientTop}return{width:e.width*i.x,height:e.height*i.y,x:e.x*i.x-l.scrollLeft*i.x+c.x,y:e.y*i.y-l.scrollTop*i.y+c.y}},isElement:L,getDimensions:function(t){return st(t)},getOffsetParent:ot,getDocumentElement:D,getScale:k,async getElementRects(t){let{reference:e,floating:n,strategy:o}=t;const s=this.getOffsetParent||ot,r=this.getDimensions;return{reference:vt(e,await s(n),o),floating:{x:0,y:0,...await r(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>T(t).direction==="rtl"};function Tt(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:l=!0,animationFrame:i=!1}=o,c=s||r?[...L(t)?V(t):t.contextElement?V(t.contextElement):[],...V(e)]:[];c.forEach(d=>{const h=!L(d)&&d.toString().includes("V");!s||i&&!h||d.addEventListener("scroll",n,{passive:!0}),r&&d.addEventListener("resize",n)});let a,u=null;l&&(u=new ResizeObserver(()=>{n()}),L(t)&&!i&&u.observe(t),L(t)||!t.contextElement||i||u.observe(t.contextElement),u.observe(e));let f=i?$(t):null;return i&&function d(){const h=$(t);!f||h.x===f.x&&h.y===f.y&&h.width===f.width&&h.height===f.height||n(),f=h,a=requestAnimationFrame(d)}(),n(),()=>{var d;c.forEach(h=>{s&&h.removeEventListener("scroll",n),r&&h.removeEventListener("resize",n)}),(d=u)==null||d.disconnect(),u=null,i&&cancelAnimationFrame(a)}}const At=(t,e,n)=>{const o=new Map,s={platform:bt,...n},r={...s.platform,_c:o};return mt(t,e,{...s,platform:r})};export{Lt as B,Et as D,At as k,Rt as u,Tt as z};
