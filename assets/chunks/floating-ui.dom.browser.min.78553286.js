function j(t){return t.split("-")[1]}function at(t){return t==="y"?"height":"width"}function I(t){return t.split("-")[0]}function K(t){return["top","bottom"].includes(I(t))?"x":"y"}function pt(t,e,n){let{reference:o,floating:r}=t;const i=o.x+o.width/2-r.width/2,c=o.y+o.height/2-r.height/2,s=K(e),l=at(s),f=o[l]/2-r[l]/2,d=s==="x";let u;switch(I(e)){case"top":u={x:i,y:o.y-r.height};break;case"bottom":u={x:i,y:o.y+o.height};break;case"right":u={x:o.x+o.width,y:c};break;case"left":u={x:o.x-r.width,y:c};break;default:u={x:o.x,y:o.y}}switch(j(e)){case"start":u[s]-=f*(n&&d?-1:1);break;case"end":u[s]+=f*(n&&d?-1:1)}return u}const Ct=async(t,e,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:c}=n,s=i.filter(Boolean),l=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:t,floating:e,strategy:r}),{x:d,y:u}=pt(f,o,l),m=o,p={},a=0;for(let h=0;h<s.length;h++){const{name:g,fn:y}=s[h],{x,y:w,data:L,reset:b}=await y({x:d,y:u,initialPlacement:o,placement:m,strategy:r,middlewareData:p,rects:f,platform:c,elements:{reference:t,floating:e}});d=x??d,u=w??u,p={...p,[g]:{...p[g],...L}},b&&a<=50&&(a++,typeof b=="object"&&(b.placement&&(m=b.placement),b.rects&&(f=b.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:r}):b.rects),{x:d,y:u}=pt(f,m,l)),h=-1)}return{x:d,y:u,placement:m,strategy:r,middlewareData:p}};function Q(t,e){return typeof t=="function"?t(e):t}function xt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function Z(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function vt(t,e){var n;e===void 0&&(e={});const{x:o,y:r,platform:i,rects:c,elements:s,strategy:l}=t,{boundary:f="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:m=!1,padding:p=0}=Q(e,t),a=xt(p),h=s[m?u==="floating"?"reference":"floating":u],g=Z(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(h)))==null||n?h:h.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:f,rootBoundary:d,strategy:l})),y=u==="floating"?{...c.floating,x:o,y:r}:c.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),w=await(i.isElement==null?void 0:i.isElement(x))&&await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1},L=Z(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:x,strategy:l}):y);return{top:(g.top-L.top+a.top)/w.y,bottom:(L.bottom-g.bottom+a.bottom)/w.y,left:(g.left-L.left+a.left)/w.x,right:(L.right-g.right+a.right)/w.x}}const G=Math.min,N=Math.max;function Ot(t,e,n){return N(t,G(e,n))}const zt=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:o,placement:r,rects:i,platform:c,elements:s}=e,{element:l,padding:f=0}=Q(t,e)||{};if(l==null)return{};const d=xt(f),u={x:n,y:o},m=K(r),p=at(m),a=await c.getDimensions(l),h=m==="y",g=h?"top":"left",y=h?"bottom":"right",x=h?"clientHeight":"clientWidth",w=i.reference[p]+i.reference[m]-u[m]-i.floating[p],L=u[m]-i.reference[m],b=await(c.getOffsetParent==null?void 0:c.getOffsetParent(l));let v=b?b[x]:0;v&&await(c.isElement==null?void 0:c.isElement(b))||(v=s.floating[x]||i.floating[p]);const S=w/2-L/2,C=v/2-a[p]/2-1,P=G(d[g],C),V=G(d[y],C),R=P,E=v-a[p]-V,T=v/2-a[p]/2+S,A=Ot(R,T,E),D=j(r)!=null&&T!=A&&i.reference[p]/2-(T<R?P:V)-a[p]/2<0?T<R?R-T:E-T:0;return{[m]:u[m]-D,data:{[m]:A,centerOffset:T-A+D}}}}),Pt=["top","right","bottom","left"];Pt.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Ft={left:"right",right:"left",bottom:"top",top:"bottom"};function tt(t){return t.replace(/left|right|bottom|top/g,e=>Ft[e])}function kt(t,e,n){n===void 0&&(n=!1);const o=j(t),r=K(t),i=at(r);let c=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(c=tt(c)),{main:c,cross:tt(c)}}const Wt={start:"end",end:"start"};function lt(t){return t.replace(/start|end/g,e=>Wt[e])}const Nt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:o,middlewareData:r,rects:i,initialPlacement:c,platform:s,elements:l}=e,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:a=!0,...h}=Q(t,e),g=I(o),y=I(c)===c,x=await(s.isRTL==null?void 0:s.isRTL(l.floating)),w=u||(y||!a?[tt(c)]:function(R){const E=tt(R);return[lt(R),E,lt(E)]}(c));u||p==="none"||w.push(...function(R,E,T,A){const D=j(R);let $=function(W,rt,Dt){const dt=["left","right"],mt=["right","left"],$t=["top","bottom"],St=["bottom","top"];switch(W){case"top":case"bottom":return Dt?rt?mt:dt:rt?dt:mt;case"left":case"right":return rt?$t:St;default:return[]}}(I(R),T==="start",A);return D&&($=$.map(W=>W+"-"+D),E&&($=$.concat($.map(lt)))),$}(c,a,p,x));const L=[c,...w],b=await vt(e,h),v=[];let S=((n=r.flip)==null?void 0:n.overflows)||[];if(f&&v.push(b[g]),d){const{main:R,cross:E}=kt(o,i,x);v.push(b[R],b[E])}if(S=[...S,{placement:o,overflows:v}],!v.every(R=>R<=0)){var C,P;const R=(((C=r.flip)==null?void 0:C.index)||0)+1,E=L[R];if(E)return{data:{index:R,overflows:S},reset:{placement:E}};let T=(P=S.filter(A=>A.overflows[0]<=0).sort((A,D)=>A.overflows[1]-D.overflows[1])[0])==null?void 0:P.placement;if(!T)switch(m){case"bestFit":{var V;const A=(V=S.map(D=>[D.placement,D.overflows.filter($=>$>0).reduce(($,W)=>$+W,0)]).sort((D,$)=>D[1]-$[1])[0])==null?void 0:V[0];A&&(T=A);break}case"initialPlacement":T=c}if(o!==T)return{reset:{placement:T}}}return{}}}},It=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,r=await async function(i,c){const{placement:s,platform:l,elements:f}=i,d=await(l.isRTL==null?void 0:l.isRTL(f.floating)),u=I(s),m=j(s),p=K(s)==="x",a=["left","top"].includes(u)?-1:1,h=d&&p?-1:1,g=Q(c,i);let{mainAxis:y,crossAxis:x,alignmentAxis:w}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return m&&typeof w=="number"&&(x=m==="end"?-1*w:w),p?{x:x*h,y:y*a}:{x:y*a,y:x*h}}(e,t);return{x:n+r.x,y:o+r.y,data:r}}}},qt=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:o,platform:r,elements:i}=e,{apply:c=()=>{},...s}=Q(t,e),l=await vt(e,s),f=I(n),d=j(n),u=K(n)==="x",{width:m,height:p}=o.floating;let a,h;f==="top"||f==="bottom"?(a=f,h=d===(await(r.isRTL==null?void 0:r.isRTL(i.floating))?"start":"end")?"left":"right"):(h=f,a=d==="end"?"top":"bottom");const g=p-l[a],y=m-l[h],x=!e.middlewareData.shift;let w=g,L=y;if(u){const v=m-l.left-l.right;L=d||x?G(y,v):v}else{const v=p-l.top-l.bottom;w=d||x?G(g,v):v}if(x&&!d){const v=N(l.left,0),S=N(l.right,0),C=N(l.top,0),P=N(l.bottom,0);u?L=m-2*(v!==0||S!==0?v+S:N(l.left,l.right)):w=p-2*(C!==0||P!==0?C+P:N(l.top,l.bottom))}await c({...e,availableWidth:L,availableHeight:w});const b=await r.getDimensions(i.floating);return m!==b.width||p!==b.height?{reset:{rects:!0}}:{}}}};function O(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function k(t){return O(t).getComputedStyle(t)}function bt(t){return t instanceof O(t).Node}function B(t){return bt(t)?(t.nodeName||"").toLowerCase():"#document"}function F(t){return t instanceof HTMLElement||t instanceof O(t).HTMLElement}function ht(t){return typeof ShadowRoot<"u"&&(t instanceof O(t).ShadowRoot||t instanceof ShadowRoot)}function J(t){const{overflow:e,overflowX:n,overflowY:o,display:r}=k(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(r)}function Ht(t){return["table","td","th"].includes(B(t))}function ct(t){const e=ft(),n=k(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function ft(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function ot(t){return["html","body","#document"].includes(B(t))}const st=Math.min,X=Math.max,et=Math.round,U=Math.floor,z=t=>({x:t,y:t});function Rt(t){const e=k(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const r=F(t),i=r?t.offsetWidth:n,c=r?t.offsetHeight:o,s=et(n)!==i||et(o)!==c;return s&&(n=i,o=c),{width:n,height:o,$:s}}function H(t){return t instanceof Element||t instanceof O(t).Element}function ut(t){return H(t)?t:t.contextElement}function Y(t){const e=ut(t);if(!F(e))return z(1);const n=e.getBoundingClientRect(),{width:o,height:r,$:i}=Rt(e);let c=(i?et(n.width):n.width)/o,s=(i?et(n.height):n.height)/r;return c&&Number.isFinite(c)||(c=1),s&&Number.isFinite(s)||(s=1),{x:c,y:s}}const Mt=z(0);function Lt(t){const e=O(t);return ft()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Mt}function q(t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=ut(t);let c=z(1);e&&(o?H(o)&&(c=Y(o)):c=Y(t));const s=function(m,p,a){return p===void 0&&(p=!1),!(!a||p&&a!==O(m))&&p}(i,n,o)?Lt(i):z(0);let l=(r.left+s.x)/c.x,f=(r.top+s.y)/c.y,d=r.width/c.x,u=r.height/c.y;if(i){const m=O(i),p=o&&H(o)?O(o):o;let a=m.frameElement;for(;a&&o&&p!==m;){const h=Y(a),g=a.getBoundingClientRect(),y=getComputedStyle(a),x=g.left+(a.clientLeft+parseFloat(y.paddingLeft))*h.x,w=g.top+(a.clientTop+parseFloat(y.paddingTop))*h.y;l*=h.x,f*=h.y,d*=h.x,u*=h.y,l+=x,f+=w,a=O(a).frameElement}}return Z({width:d,height:u,x:l,y:f})}function it(t){return H(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function M(t){var e;return(e=(bt(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Tt(t){return q(M(t)).left+it(t).scrollLeft}function _(t){if(B(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ht(t)&&t.host||M(t);return ht(e)?e.host:e}function Et(t){const e=_(t);return ot(e)?t.ownerDocument?t.ownerDocument.body:t.body:F(e)&&J(e)?e:Et(e)}function nt(t,e){var n;e===void 0&&(e=[]);const o=Et(t),r=o===((n=t.ownerDocument)==null?void 0:n.body),i=O(o);return r?e.concat(i,i.visualViewport||[],J(o)?o:[]):e.concat(o,nt(o))}function gt(t,e,n){let o;if(e==="viewport")o=function(r,i){const c=O(r),s=M(r),l=c.visualViewport;let f=s.clientWidth,d=s.clientHeight,u=0,m=0;if(l){f=l.width,d=l.height;const p=ft();(!p||p&&i==="fixed")&&(u=l.offsetLeft,m=l.offsetTop)}return{width:f,height:d,x:u,y:m}}(t,n);else if(e==="document")o=function(r){const i=M(r),c=it(r),s=r.ownerDocument.body,l=X(i.scrollWidth,i.clientWidth,s.scrollWidth,s.clientWidth),f=X(i.scrollHeight,i.clientHeight,s.scrollHeight,s.clientHeight);let d=-c.scrollLeft+Tt(r);const u=-c.scrollTop;return k(s).direction==="rtl"&&(d+=X(i.clientWidth,s.clientWidth)-l),{width:l,height:f,x:d,y:u}}(M(t));else if(H(e))o=function(r,i){const c=q(r,!0,i==="fixed"),s=c.top+r.clientTop,l=c.left+r.clientLeft,f=F(r)?Y(r):z(1);return{width:r.clientWidth*f.x,height:r.clientHeight*f.y,x:l*f.x,y:s*f.y}}(e,n);else{const r=Lt(t);o={...e,x:e.x-r.x,y:e.y-r.y}}return Z(o)}function At(t,e){const n=_(t);return!(n===e||!H(n)||ot(n))&&(k(n).position==="fixed"||At(n,e))}function Vt(t,e,n){const o=F(e),r=M(e),i=n==="fixed",c=q(t,!0,i,e);let s={scrollLeft:0,scrollTop:0};const l=z(0);if(o||!o&&!i)if((B(e)!=="body"||J(r))&&(s=it(e)),F(e)){const f=q(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else r&&(l.x=Tt(r));return{x:c.left+s.scrollLeft-l.x,y:c.top+s.scrollTop-l.y,width:c.width,height:c.height}}function yt(t,e){return F(t)&&k(t).position!=="fixed"?e?e(t):t.offsetParent:null}function wt(t,e){const n=O(t);if(!F(t))return n;let o=yt(t,e);for(;o&&Ht(o)&&k(o).position==="static";)o=yt(o,e);return o&&(B(o)==="html"||B(o)==="body"&&k(o).position==="static"&&!ct(o))?n:o||function(r){let i=_(r);for(;F(i)&&!ot(i);){if(ct(i))return i;i=_(i)}return null}(t)||n}const Bt={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const r=F(n),i=M(n);if(n===i)return e;let c={scrollLeft:0,scrollTop:0},s=z(1);const l=z(0);if((r||!r&&o!=="fixed")&&((B(n)!=="body"||J(i))&&(c=it(n)),F(n))){const f=q(n);s=Y(n),l.x=f.x+n.clientLeft,l.y=f.y+n.clientTop}return{width:e.width*s.x,height:e.height*s.y,x:e.x*s.x-c.scrollLeft*s.x+l.x,y:e.y*s.y-c.scrollTop*s.y+l.y}},getDocumentElement:M,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:r}=t;const i=[...n==="clippingAncestors"?function(l,f){const d=f.get(l);if(d)return d;let u=nt(l).filter(h=>H(h)&&B(h)!=="body"),m=null;const p=k(l).position==="fixed";let a=p?_(l):l;for(;H(a)&&!ot(a);){const h=k(a),g=ct(a);g||h.position!=="fixed"||(m=null),(p?!g&&!m:!g&&h.position==="static"&&m&&["absolute","fixed"].includes(m.position)||J(a)&&!g&&At(l,a))?u=u.filter(y=>y!==a):m=h,a=_(a)}return f.set(l,u),u}(e,this._c):[].concat(n),o],c=i[0],s=i.reduce((l,f)=>{const d=gt(e,f,r);return l.top=X(d.top,l.top),l.right=st(d.right,l.right),l.bottom=st(d.bottom,l.bottom),l.left=X(d.left,l.left),l},gt(e,c,r));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:wt,getElementRects:async function(t){let{reference:e,floating:n,strategy:o}=t;const r=this.getOffsetParent||wt,i=this.getDimensions;return{reference:Vt(e,await r(n),o),floating:{x:0,y:0,...await i(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return Rt(t)},getScale:Y,isElement:H,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}};function Xt(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=o,f=ut(t),d=r||i?[...f?nt(f):[],...nt(e)]:[];d.forEach(g=>{r&&g.addEventListener("scroll",n,{passive:!0}),i&&g.addEventListener("resize",n)});const u=f&&s?function(g,y){let x,w=null;const L=M(g);function b(){clearTimeout(x),w&&w.disconnect(),w=null}return function v(S,C){S===void 0&&(S=!1),C===void 0&&(C=1),b();const{left:P,top:V,width:R,height:E}=g.getBoundingClientRect();if(S||y(),!R||!E)return;const T={rootMargin:-U(V)+"px "+-U(L.clientWidth-(P+R))+"px "+-U(L.clientHeight-(V+E))+"px "+-U(P)+"px",threshold:X(0,st(1,C))||1};let A=!0;function D($){const W=$[0].intersectionRatio;if(W!==C){if(!A)return v();W?v(!1,W):x=setTimeout(()=>{v(!1,1e-7)},100)}A=!1}try{w=new IntersectionObserver(D,{...T,root:L.ownerDocument})}catch{w=new IntersectionObserver(D,T)}w.observe(g)}(!0),b}(f,n):null;let m,p=-1,a=null;c&&(a=new ResizeObserver(g=>{let[y]=g;y&&y.target===f&&a&&(a.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{a&&a.observe(e)})),n()}),f&&!l&&a.observe(f),a.observe(e));let h=l?q(t):null;return l&&function g(){const y=q(t);!h||y.x===h.x&&y.y===h.y&&y.width===h.width&&y.height===h.height||n(),h=y,m=requestAnimationFrame(g)}(),n(),()=>{d.forEach(g=>{r&&g.removeEventListener("scroll",n),i&&g.removeEventListener("resize",n)}),u&&u(),a&&a.disconnect(),a=null,l&&cancelAnimationFrame(m)}}const Yt=(t,e,n)=>{const o=new Map,r={platform:Bt,...n},i={...r.platform,_c:o};return Ct(t,e,{...r,platform:i})};export{Xt as A,Yt as B,qt as C,It as L,Nt as a,zt as g};
