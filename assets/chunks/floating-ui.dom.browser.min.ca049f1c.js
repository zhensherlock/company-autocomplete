function Y(t){return t.split("-")[1]}function lt(t){return t==="y"?"height":"width"}function B(t){return t.split("-")[0]}function K(t){return["top","bottom"].includes(B(t))?"x":"y"}function ft(t,e,o){let{reference:n,floating:r}=t;const i=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2,s=K(e),c=lt(s),a=n[c]/2-r[c]/2,m=s==="x";let f;switch(B(e)){case"top":f={x:i,y:n.y-r.height};break;case"bottom":f={x:i,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:l};break;case"left":f={x:n.x-r.width,y:l};break;default:f={x:n.x,y:n.y}}switch(Y(e)){case"start":f[s]-=a*(o&&m?-1:1);break;case"end":f[s]+=a*(o&&m?-1:1)}return f}const $t=async(t,e,o)=>{const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:l}=o,s=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(e));let a=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y:f}=ft(a,n,c),d=n,u={},p=0;for(let h=0;h<s.length;h++){const{name:g,fn:y}=s[h],{x,y:w,data:E,reset:b}=await y({x:m,y:f,initialPlacement:n,placement:d,strategy:r,middlewareData:u,rects:a,platform:l,elements:{reference:t,floating:e}});m=x??m,f=w??f,u={...u,[g]:{...u[g],...E}},b&&p<=50&&(p++,typeof b=="object"&&(b.placement&&(d=b.placement),b.rects&&(a=b.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:r}):b.rects),{x:m,y:f}=ft(a,d,c)),h=-1)}return{x:m,y:f,placement:d,strategy:r,middlewareData:u}};function Q(t,e){return typeof t=="function"?t(e):t}function yt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function U(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function xt(t,e){var o;e===void 0&&(e={});const{x:n,y:r,platform:i,rects:l,elements:s,strategy:c}=t,{boundary:a="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:d=!1,padding:u=0}=Q(e,t),p=yt(u),h=s[d?f==="floating"?"reference":"floating":f],g=U(await i.getClippingRect({element:(o=await(i.isElement==null?void 0:i.isElement(h)))==null||o?h:h.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:a,rootBoundary:m,strategy:c})),y=f==="floating"?{...l.floating,x:n,y:r}:l.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),w=await(i.isElement==null?void 0:i.isElement(x))&&await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1},E=U(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:x,strategy:c}):y);return{top:(g.top-E.top+p.top)/w.y,bottom:(E.bottom-g.bottom+p.bottom)/w.y,left:(g.left-E.left+p.left)/w.x,right:(E.right-g.right+p.right)/w.x}}const I=Math.min,M=Math.max;function kt(t,e,o){return M(t,I(e,o))}const Bt=t=>({name:"arrow",options:t,async fn(e){const{x:o,y:n,placement:r,rects:i,platform:l,elements:s}=e,{element:c,padding:a=0}=Q(t,e)||{};if(c==null)return{};const m=yt(a),f={x:o,y:n},d=K(r),u=lt(d),p=await l.getDimensions(c),h=d==="y",g=h?"top":"left",y=h?"bottom":"right",x=h?"clientHeight":"clientWidth",w=i.reference[u]+i.reference[d]-f[d]-i.floating[u],E=f[d]-i.reference[d],b=await(l.getOffsetParent==null?void 0:l.getOffsetParent(c));let v=b?b[x]:0;v&&await(l.isElement==null?void 0:l.isElement(b))||(v=s.floating[x]||i.floating[u]);const O=w/2-E/2,F=v/2-p[u]/2-1,W=I(m[g],F),_=I(m[y],F),R=W,A=v-p[u]-_,L=v/2-p[u]/2+O,D=kt(R,L,A),$=Y(r)!=null&&L!=D&&i.reference[u]/2-(L<R?W:_)-p[u]/2<0;return{[d]:f[d]-($?L<R?R-L:A-L:0),data:{[d]:D,centerOffset:L-D}}}}),Ct=["top","right","bottom","left"];Ct.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Ot={left:"right",right:"left",bottom:"top",top:"bottom"};function Z(t){return t.replace(/left|right|bottom|top/g,e=>Ot[e])}function Ft(t,e,o){o===void 0&&(o=!1);const n=Y(t),r=K(t),i=lt(r);let l=r==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=Z(l)),{main:l,cross:Z(l)}}const Wt={start:"end",end:"start"};function it(t){return t.replace(/start|end/g,e=>Wt[e])}const zt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o;const{placement:n,middlewareData:r,rects:i,initialPlacement:l,platform:s,elements:c}=e,{mainAxis:a=!0,crossAxis:m=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:u="none",flipAlignment:p=!0,...h}=Q(t,e),g=B(n),y=B(l)===l,x=await(s.isRTL==null?void 0:s.isRTL(c.floating)),w=f||(y||!p?[Z(l)]:function(R){const A=Z(R);return[it(R),A,it(A)]}(l));f||u==="none"||w.push(...function(R,A,L,D){const $=Y(R);let S=function(j,ot,Dt){const st=["left","right"],at=["right","left"],St=["top","bottom"],Pt=["bottom","top"];switch(j){case"top":case"bottom":return Dt?ot?at:st:ot?st:at;case"left":case"right":return ot?St:Pt;default:return[]}}(B(R),L==="start",D);return $&&(S=S.map(j=>j+"-"+$),A&&(S=S.concat(S.map(it)))),S}(l,p,u,x));const E=[l,...w],b=await xt(e,h),v=[];let O=((o=r.flip)==null?void 0:o.overflows)||[];if(a&&v.push(b[g]),m){const{main:R,cross:A}=Ft(n,i,x);v.push(b[R],b[A])}if(O=[...O,{placement:n,overflows:v}],!v.every(R=>R<=0)){var F,W;const R=(((F=r.flip)==null?void 0:F.index)||0)+1,A=E[R];if(A)return{data:{index:R,overflows:O},reset:{placement:A}};let L=(W=O.filter(D=>D.overflows[0]<=0).sort((D,$)=>D.overflows[1]-$.overflows[1])[0])==null?void 0:W.placement;if(!L)switch(d){case"bestFit":{var _;const D=(_=O.map($=>[$.placement,$.overflows.filter(S=>S>0).reduce((S,j)=>S+j,0)]).sort(($,S)=>$[1]-S[1])[0])==null?void 0:_[0];D&&(L=D);break}case"initialPlacement":L=l}if(n!==L)return{reset:{placement:L}}}return{}}}},Nt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:o,y:n}=e,r=await async function(i,l){const{placement:s,platform:c,elements:a}=i,m=await(c.isRTL==null?void 0:c.isRTL(a.floating)),f=B(s),d=Y(s),u=K(s)==="x",p=["left","top"].includes(f)?-1:1,h=m&&u?-1:1,g=Q(l,i);let{mainAxis:y,crossAxis:x,alignmentAxis:w}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return d&&typeof w=="number"&&(x=d==="end"?-1*w:w),u?{x:x*h,y:y*p}:{x:y*p,y:x*h}}(e,t);return{x:o+r.x,y:n+r.y,data:r}}}},Xt=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:o,rects:n,platform:r,elements:i}=e,{apply:l=()=>{},...s}=Q(t,e),c=await xt(e,s),a=B(o),m=Y(o),f=K(o)==="x",{width:d,height:u}=n.floating;let p,h;a==="top"||a==="bottom"?(p=a,h=m===(await(r.isRTL==null?void 0:r.isRTL(i.floating))?"start":"end")?"left":"right"):(h=a,p=m==="end"?"top":"bottom");const g=u-c[p],y=d-c[h],x=!e.middlewareData.shift;let w=g,E=y;if(f){const v=d-c.left-c.right;E=m||x?I(y,v):v}else{const v=u-c.top-c.bottom;w=m||x?I(g,v):v}if(x&&!m){const v=M(c.left,0),O=M(c.right,0),F=M(c.top,0),W=M(c.bottom,0);f?E=d-2*(v!==0||O!==0?v+O:M(c.left,c.right)):w=u-2*(F!==0||W!==0?F+W:M(c.top,c.bottom))}await l({...e,availableWidth:E,availableHeight:w});const b=await r.getDimensions(i.floating);return d!==b.width||u!==b.height?{reset:{rects:!0}}:{}}}};function P(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function k(t){return P(t).getComputedStyle(t)}function wt(t){return t instanceof P(t).Node}function V(t){return wt(t)?(t.nodeName||"").toLowerCase():""}function C(t){return t instanceof P(t).HTMLElement}function T(t){return t instanceof P(t).Element}function ut(t){return typeof ShadowRoot>"u"?!1:t instanceof P(t).ShadowRoot||t instanceof ShadowRoot}function J(t){const{overflow:e,overflowX:o,overflowY:n,display:r}=k(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(r)}function Ht(t){return["table","td","th"].includes(V(t))}function rt(t){const e=ct(),o=k(t);return o.transform!=="none"||o.perspective!=="none"||!e&&!!o.backdropFilter&&o.backdropFilter!=="none"||!e&&!!o.filter&&o.filter!=="none"||["transform","perspective","filter"].some(n=>(o.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(o.contain||"").includes(n))}function ct(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function et(t){return["html","body","#document"].includes(V(t))}const dt=Math.min,q=Math.max,tt=Math.round;function vt(t){const e=k(t);let o=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=C(t),i=r?t.offsetWidth:o,l=r?t.offsetHeight:n,s=tt(o)!==i||tt(n)!==l;return s&&(o=i,n=l),{width:o,height:n,fallback:s}}function bt(t){return T(t)?t:t.contextElement}const Rt={x:1,y:1};function N(t){const e=bt(t);if(!C(e))return Rt;const o=e.getBoundingClientRect(),{width:n,height:r,fallback:i}=vt(e);let l=(i?tt(o.width):o.width)/n,s=(i?tt(o.height):o.height)/r;return l&&Number.isFinite(l)||(l=1),s&&Number.isFinite(s)||(s=1),{x:l,y:s}}const mt={x:0,y:0};function Lt(t,e,o){var n,r;if(e===void 0&&(e=!0),!ct())return mt;const i=t?P(t):window;return!o||e&&o!==i?mt:{x:((n=i.visualViewport)==null?void 0:n.offsetLeft)||0,y:((r=i.visualViewport)==null?void 0:r.offsetTop)||0}}function z(t,e,o,n){e===void 0&&(e=!1),o===void 0&&(o=!1);const r=t.getBoundingClientRect(),i=bt(t);let l=Rt;e&&(n?T(n)&&(l=N(n)):l=N(t));const s=Lt(i,o,n);let c=(r.left+s.x)/l.x,a=(r.top+s.y)/l.y,m=r.width/l.x,f=r.height/l.y;if(i){const d=P(i),u=n&&T(n)?P(n):n;let p=d.frameElement;for(;p&&n&&u!==d;){const h=N(p),g=p.getBoundingClientRect(),y=getComputedStyle(p);g.x+=(p.clientLeft+parseFloat(y.paddingLeft))*h.x,g.y+=(p.clientTop+parseFloat(y.paddingTop))*h.y,c*=h.x,a*=h.y,m*=h.x,f*=h.y,c+=g.x,a+=g.y,p=P(p).frameElement}}return U({width:m,height:f,x:c,y:a})}function H(t){return((wt(t)?t.ownerDocument:t.document)||window.document).documentElement}function nt(t){return T(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Et(t){return z(H(t)).left+nt(t).scrollLeft}function X(t){if(V(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ut(t)&&t.host||H(t);return ut(e)?e.host:e}function Tt(t){const e=X(t);return et(e)?e.ownerDocument.body:C(e)&&J(e)?e:Tt(e)}function G(t,e){var o;e===void 0&&(e=[]);const n=Tt(t),r=n===((o=t.ownerDocument)==null?void 0:o.body),i=P(n);return r?e.concat(i,i.visualViewport||[],J(n)?n:[]):e.concat(n,G(n))}function ht(t,e,o){let n;if(e==="viewport")n=function(r,i){const l=P(r),s=H(r),c=l.visualViewport;let a=s.clientWidth,m=s.clientHeight,f=0,d=0;if(c){a=c.width,m=c.height;const u=ct();(!u||u&&i==="fixed")&&(f=c.offsetLeft,d=c.offsetTop)}return{width:a,height:m,x:f,y:d}}(t,o);else if(e==="document")n=function(r){const i=H(r),l=nt(r),s=r.ownerDocument.body,c=q(i.scrollWidth,i.clientWidth,s.scrollWidth,s.clientWidth),a=q(i.scrollHeight,i.clientHeight,s.scrollHeight,s.clientHeight);let m=-l.scrollLeft+Et(r);const f=-l.scrollTop;return k(s).direction==="rtl"&&(m+=q(i.clientWidth,s.clientWidth)-c),{width:c,height:a,x:m,y:f}}(H(t));else if(T(e))n=function(r,i){const l=z(r,!0,i==="fixed"),s=l.top+r.clientTop,c=l.left+r.clientLeft,a=C(r)?N(r):{x:1,y:1};return{width:r.clientWidth*a.x,height:r.clientHeight*a.y,x:c*a.x,y:s*a.y}}(e,o);else{const r=Lt(t);n={...e,x:e.x-r.x,y:e.y-r.y}}return U(n)}function At(t,e){const o=X(t);return!(o===e||!T(o)||et(o))&&(k(o).position==="fixed"||At(o,e))}function pt(t,e){return C(t)&&k(t).position!=="fixed"?e?e(t):t.offsetParent:null}function gt(t,e){const o=P(t);if(!C(t))return o;let n=pt(t,e);for(;n&&Ht(n)&&k(n).position==="static";)n=pt(n,e);return n&&(V(n)==="html"||V(n)==="body"&&k(n).position==="static"&&!rt(n))?o:n||function(r){let i=X(r);for(;C(i)&&!et(i);){if(rt(i))return i;i=X(i)}return null}(t)||o}function Vt(t,e,o){const n=C(e),r=H(e),i=o==="fixed",l=z(t,!0,i,e);let s={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if(n||!n&&!i)if((V(e)!=="body"||J(r))&&(s=nt(e)),C(e)){const a=z(e,!0,i,e);c.x=a.x+e.clientLeft,c.y=a.y+e.clientTop}else r&&(c.x=Et(r));return{x:l.left+s.scrollLeft-c.x,y:l.top+s.scrollTop-c.y,width:l.width,height:l.height}}const Mt={getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:n,strategy:r}=t;const i=o==="clippingAncestors"?function(a,m){const f=m.get(a);if(f)return f;let d=G(a).filter(g=>T(g)&&V(g)!=="body"),u=null;const p=k(a).position==="fixed";let h=p?X(a):a;for(;T(h)&&!et(h);){const g=k(h),y=rt(h);y||g.position!=="fixed"||(u=null),(p?!y&&!u:!y&&g.position==="static"&&u&&["absolute","fixed"].includes(u.position)||J(h)&&!y&&At(a,h))?d=d.filter(x=>x!==h):u=g,h=X(h)}return m.set(a,d),d}(e,this._c):[].concat(o),l=[...i,n],s=l[0],c=l.reduce((a,m)=>{const f=ht(e,m,r);return a.top=q(f.top,a.top),a.right=dt(f.right,a.right),a.bottom=dt(f.bottom,a.bottom),a.left=q(f.left,a.left),a},ht(e,s,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const r=C(o),i=H(o);if(o===i)return e;let l={scrollLeft:0,scrollTop:0},s={x:1,y:1};const c={x:0,y:0};if((r||!r&&n!=="fixed")&&((V(o)!=="body"||J(i))&&(l=nt(o)),C(o))){const a=z(o);s=N(o),c.x=a.x+o.clientLeft,c.y=a.y+o.clientTop}return{width:e.width*s.x,height:e.height*s.y,x:e.x*s.x-l.scrollLeft*s.x+c.x,y:e.y*s.y-l.scrollTop*s.y+c.y}},isElement:T,getDimensions:function(t){return vt(t)},getOffsetParent:gt,getDocumentElement:H,getScale:N,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t;const r=this.getOffsetParent||gt,i=this.getDimensions;return{reference:Vt(e,await r(o),n),floating:{x:0,y:0,...await i(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>k(t).direction==="rtl"};function Yt(t,e,o,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:l=!0,animationFrame:s=!1}=n,c=r||i?[...T(t)?G(t):t.contextElement?G(t.contextElement):[],...G(e)]:[];c.forEach(d=>{const u=!T(d)&&d.toString().includes("V");!r||s&&!u||d.addEventListener("scroll",o,{passive:!0}),i&&d.addEventListener("resize",o)});let a,m=null;l&&(m=new ResizeObserver(()=>{o()}),T(t)&&!s&&m.observe(t),T(t)||!t.contextElement||s||m.observe(t.contextElement),m.observe(e));let f=s?z(t):null;return s&&function d(){const u=z(t);!f||u.x===f.x&&u.y===f.y&&u.width===f.width&&u.height===f.height||o(),f=u,a=requestAnimationFrame(d)}(),o(),()=>{var d;c.forEach(u=>{r&&u.removeEventListener("scroll",o),i&&u.removeEventListener("resize",o)}),(d=m)==null||d.disconnect(),m=null,s&&cancelAnimationFrame(a)}}const _t=(t,e,o)=>{const n=new Map,r={platform:Mt,...o},i={...r.platform,_c:n};return $t(t,e,{...r,platform:i})};export{zt as A,Xt as C,Nt as L,_t as M,Bt as g,Yt as z};
