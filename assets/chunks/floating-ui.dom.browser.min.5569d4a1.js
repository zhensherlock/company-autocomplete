function j(t){return t.split("-")[1]}function at(t){return t==="y"?"height":"width"}function N(t){return t.split("-")[0]}function K(t){return["top","bottom"].includes(N(t))?"x":"y"}function ht(t,e,n){let{reference:o,floating:r}=t;const i=o.x+o.width/2-r.width/2,l=o.y+o.height/2-r.height/2,a=K(e),c=at(a),s=o[c]/2-r[c]/2,p=a==="x";let f;switch(N(e)){case"top":f={x:i,y:o.y-r.height};break;case"bottom":f={x:i,y:o.y+o.height};break;case"right":f={x:o.x+o.width,y:l};break;case"left":f={x:o.x-r.width,y:l};break;default:f={x:o.x,y:o.y}}switch(j(e)){case"start":f[a]-=s*(n&&p?-1:1);break;case"end":f[a]+=s*(n&&p?-1:1)}return f}const Pt=async(t,e,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:l}=n,a=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(e));let s=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:p,y:f}=ht(s,o,c),g=o,h={},u=0;for(let d=0;d<a.length;d++){const{name:m,fn:y}=a[d],{x,y:w,data:L,reset:b}=await y({x:p,y:f,initialPlacement:o,placement:g,strategy:r,middlewareData:h,rects:s,platform:l,elements:{reference:t,floating:e}});p=x??p,f=w??f,h={...h,[m]:{...h[m],...L}},b&&u<=50&&(u++,typeof b=="object"&&(b.placement&&(g=b.placement),b.rects&&(s=b.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:r}):b.rects),{x:p,y:f}=ht(s,g,c)),d=-1)}return{x:p,y:f,placement:g,strategy:r,middlewareData:h}};function Q(t,e){return typeof t=="function"?t(e):t}function vt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function Z(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function bt(t,e){var n;e===void 0&&(e={});const{x:o,y:r,platform:i,rects:l,elements:a,strategy:c}=t,{boundary:s="clippingAncestors",rootBoundary:p="viewport",elementContext:f="floating",altBoundary:g=!1,padding:h=0}=Q(e,t),u=vt(h),d=a[g?f==="floating"?"reference":"floating":f],m=Z(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(d)))==null||n?d:d.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:s,rootBoundary:p,strategy:c})),y=f==="floating"?{...l.floating,x:o,y:r}:l.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),w=await(i.isElement==null?void 0:i.isElement(x))&&await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1},L=Z(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:x,strategy:c}):y);return{top:(m.top-L.top+u.top)/w.y,bottom:(L.bottom-m.bottom+u.bottom)/w.y,left:(m.left-L.left+u.left)/w.x,right:(L.right-m.right+u.right)/w.x}}const G=Math.min,z=Math.max;function Ct(t,e,n){return z(t,G(e,n))}const zt=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:o,placement:r,rects:i,platform:l,elements:a}=e,{element:c,padding:s=0}=Q(t,e)||{};if(c==null)return{};const p=vt(s),f={x:n,y:o},g=K(r),h=at(g),u=await l.getDimensions(c),d=g==="y",m=d?"top":"left",y=d?"bottom":"right",x=d?"clientHeight":"clientWidth",w=i.reference[h]+i.reference[g]-f[g]-i.floating[h],L=f[g]-i.reference[g],b=await(l.getOffsetParent==null?void 0:l.getOffsetParent(c));let v=b?b[x]:0;v&&await(l.isElement==null?void 0:l.isElement(b))||(v=a.floating[x]||i.floating[h]);const S=w/2-L/2,O=v/2-u[h]/2-1,C=G(p[m],O),B=G(p[y],O),R=C,E=v-u[h]-B,T=v/2-u[h]/2+S,A=Ct(R,T,E),D=j(r)!=null&&T!=A&&i.reference[h]/2-(T<R?C:B)-u[h]/2<0?T<R?R-T:E-T:0;return{[g]:f[g]-D,data:{[g]:A,centerOffset:T-A+D}}}}),Ft=["top","right","bottom","left"];Ft.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const kt={left:"right",right:"left",bottom:"top",top:"bottom"};function tt(t){return t.replace(/left|right|bottom|top/g,e=>kt[e])}function Wt(t,e,n){n===void 0&&(n=!1);const o=j(t),r=K(t),i=at(r);let l=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=tt(l)),{main:l,cross:tt(l)}}const Ht={start:"end",end:"start"};function lt(t){return t.replace(/start|end/g,e=>Ht[e])}const Nt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:o,middlewareData:r,rects:i,initialPlacement:l,platform:a,elements:c}=e,{mainAxis:s=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:u=!0,...d}=Q(t,e),m=N(o),y=N(l)===l,x=await(a.isRTL==null?void 0:a.isRTL(c.floating)),w=f||(y||!u?[tt(l)]:function(R){const E=tt(R);return[lt(R),E,lt(E)]}(l));f||h==="none"||w.push(...function(R,E,T,A){const D=j(R);let $=function(W,rt,$t){const dt=["left","right"],mt=["right","left"],St=["top","bottom"],Ot=["bottom","top"];switch(W){case"top":case"bottom":return $t?rt?mt:dt:rt?dt:mt;case"left":case"right":return rt?St:Ot;default:return[]}}(N(R),T==="start",A);return D&&($=$.map(W=>W+"-"+D),E&&($=$.concat($.map(lt)))),$}(l,u,h,x));const L=[l,...w],b=await bt(e,d),v=[];let S=((n=r.flip)==null?void 0:n.overflows)||[];if(s&&v.push(b[m]),p){const{main:R,cross:E}=Wt(o,i,x);v.push(b[R],b[E])}if(S=[...S,{placement:o,overflows:v}],!v.every(R=>R<=0)){var O,C;const R=(((O=r.flip)==null?void 0:O.index)||0)+1,E=L[R];if(E)return{data:{index:R,overflows:S},reset:{placement:E}};let T=(C=S.filter(A=>A.overflows[0]<=0).sort((A,D)=>A.overflows[1]-D.overflows[1])[0])==null?void 0:C.placement;if(!T)switch(g){case"bestFit":{var B;const A=(B=S.map(D=>[D.placement,D.overflows.filter($=>$>0).reduce(($,W)=>$+W,0)]).sort((D,$)=>D[1]-$[1])[0])==null?void 0:B[0];A&&(T=A);break}case"initialPlacement":T=l}if(o!==T)return{reset:{placement:T}}}return{}}}},It=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,r=await async function(i,l){const{placement:a,platform:c,elements:s}=i,p=await(c.isRTL==null?void 0:c.isRTL(s.floating)),f=N(a),g=j(a),h=K(a)==="x",u=["left","top"].includes(f)?-1:1,d=p&&h?-1:1,m=Q(l,i);let{mainAxis:y,crossAxis:x,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return g&&typeof w=="number"&&(x=g==="end"?-1*w:w),h?{x:x*d,y:y*u}:{x:y*u,y:x*d}}(e,t);return{x:n+r.x,y:o+r.y,data:r}}}},qt=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:o,platform:r,elements:i}=e,{apply:l=()=>{},...a}=Q(t,e),c=await bt(e,a),s=N(n),p=j(n),f=K(n)==="x",{width:g,height:h}=o.floating;let u,d;s==="top"||s==="bottom"?(u=s,d=p===(await(r.isRTL==null?void 0:r.isRTL(i.floating))?"start":"end")?"left":"right"):(d=s,u=p==="end"?"top":"bottom");const m=h-c[u],y=g-c[d],x=!e.middlewareData.shift;let w=m,L=y;if(f){const v=g-c.left-c.right;L=p||x?G(y,v):v}else{const v=h-c.top-c.bottom;w=p||x?G(m,v):v}if(x&&!p){const v=z(c.left,0),S=z(c.right,0),O=z(c.top,0),C=z(c.bottom,0);f?L=g-2*(v!==0||S!==0?v+S:z(c.left,c.right)):w=h-2*(O!==0||C!==0?O+C:z(c.top,c.bottom))}await l({...e,availableWidth:L,availableHeight:w});const b=await r.getDimensions(i.floating);return g!==b.width||h!==b.height?{reset:{rects:!0}}:{}}}};function P(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function F(t){return P(t).getComputedStyle(t)}function Rt(t){return t instanceof P(t).Node}function V(t){return Rt(t)?(t.nodeName||"").toLowerCase():"#document"}function k(t){return t instanceof P(t).HTMLElement}function H(t){return t instanceof P(t).Element}function pt(t){return typeof ShadowRoot<"u"&&(t instanceof P(t).ShadowRoot||t instanceof ShadowRoot)}function J(t){const{overflow:e,overflowX:n,overflowY:o,display:r}=F(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(r)}function Mt(t){return["table","td","th"].includes(V(t))}function ct(t){const e=ft(),n=F(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function ft(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function ot(t){return["html","body","#document"].includes(V(t))}const st=Math.min,X=Math.max,et=Math.round,U=Math.floor,I=t=>({x:t,y:t});function Lt(t){const e=F(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const r=k(t),i=r?t.offsetWidth:n,l=r?t.offsetHeight:o,a=et(n)!==i||et(o)!==l;return a&&(n=i,o=l),{width:n,height:o,$:a}}function ut(t){return H(t)?t:t.contextElement}function Y(t){const e=ut(t);if(!k(e))return I(1);const n=e.getBoundingClientRect(),{width:o,height:r,$:i}=Lt(e);let l=(i?et(n.width):n.width)/o,a=(i?et(n.height):n.height)/r;return l&&Number.isFinite(l)||(l=1),a&&Number.isFinite(a)||(a=1),{x:l,y:a}}const gt=I(0);function Tt(t,e,n){var o,r;if(e===void 0&&(e=!0),!ft())return gt;const i=t?P(t):window;return!n||e&&n!==i?gt:{x:((o=i.visualViewport)==null?void 0:o.offsetLeft)||0,y:((r=i.visualViewport)==null?void 0:r.offsetTop)||0}}function q(t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=ut(t);let l=I(1);e&&(o?H(o)&&(l=Y(o)):l=Y(t));const a=Tt(i,n,o);let c=(r.left+a.x)/l.x,s=(r.top+a.y)/l.y,p=r.width/l.x,f=r.height/l.y;if(i){const g=P(i),h=o&&H(o)?P(o):o;let u=g.frameElement;for(;u&&o&&h!==g;){const d=Y(u),m=u.getBoundingClientRect(),y=getComputedStyle(u),x=m.left+(u.clientLeft+parseFloat(y.paddingLeft))*d.x,w=m.top+(u.clientTop+parseFloat(y.paddingTop))*d.y;c*=d.x,s*=d.y,p*=d.x,f*=d.y,c+=x,s+=w,u=P(u).frameElement}}return Z({width:p,height:f,x:c,y:s})}function M(t){return((Rt(t)?t.ownerDocument:t.document)||window.document).documentElement}function it(t){return H(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Et(t){return q(M(t)).left+it(t).scrollLeft}function _(t){if(V(t)==="html")return t;const e=t.assignedSlot||t.parentNode||pt(t)&&t.host||M(t);return pt(e)?e.host:e}function At(t){const e=_(t);return ot(e)?t.ownerDocument?t.ownerDocument.body:t.body:k(e)&&J(e)?e:At(e)}function nt(t,e){var n;e===void 0&&(e=[]);const o=At(t),r=o===((n=t.ownerDocument)==null?void 0:n.body),i=P(o);return r?e.concat(i,i.visualViewport||[],J(o)?o:[]):e.concat(o,nt(o))}function yt(t,e,n){let o;if(e==="viewport")o=function(r,i){const l=P(r),a=M(r),c=l.visualViewport;let s=a.clientWidth,p=a.clientHeight,f=0,g=0;if(c){s=c.width,p=c.height;const h=ft();(!h||h&&i==="fixed")&&(f=c.offsetLeft,g=c.offsetTop)}return{width:s,height:p,x:f,y:g}}(t,n);else if(e==="document")o=function(r){const i=M(r),l=it(r),a=r.ownerDocument.body,c=X(i.scrollWidth,i.clientWidth,a.scrollWidth,a.clientWidth),s=X(i.scrollHeight,i.clientHeight,a.scrollHeight,a.clientHeight);let p=-l.scrollLeft+Et(r);const f=-l.scrollTop;return F(a).direction==="rtl"&&(p+=X(i.clientWidth,a.clientWidth)-c),{width:c,height:s,x:p,y:f}}(M(t));else if(H(e))o=function(r,i){const l=q(r,!0,i==="fixed"),a=l.top+r.clientTop,c=l.left+r.clientLeft,s=k(r)?Y(r):I(1);return{width:r.clientWidth*s.x,height:r.clientHeight*s.y,x:c*s.x,y:a*s.y}}(e,n);else{const r=Tt(t);o={...e,x:e.x-r.x,y:e.y-r.y}}return Z(o)}function Dt(t,e){const n=_(t);return!(n===e||!H(n)||ot(n))&&(F(n).position==="fixed"||Dt(n,e))}function wt(t,e){return k(t)&&F(t).position!=="fixed"?e?e(t):t.offsetParent:null}function xt(t,e){const n=P(t);if(!k(t))return n;let o=wt(t,e);for(;o&&Mt(o)&&F(o).position==="static";)o=wt(o,e);return o&&(V(o)==="html"||V(o)==="body"&&F(o).position==="static"&&!ct(o))?n:o||function(r){let i=_(r);for(;k(i)&&!ot(i);){if(ct(i))return i;i=_(i)}return null}(t)||n}function Bt(t,e,n){const o=k(e),r=M(e),i=n==="fixed",l=q(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=I(0);if(o||!o&&!i)if((V(e)!=="body"||J(r))&&(a=it(e)),k(e)){const s=q(e,!0,i,e);c.x=s.x+e.clientLeft,c.y=s.y+e.clientTop}else r&&(c.x=Et(r));return{x:l.left+a.scrollLeft-c.x,y:l.top+a.scrollTop-c.y,width:l.width,height:l.height}}const Vt={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:r}=t;const i=n==="clippingAncestors"?function(s,p){const f=p.get(s);if(f)return f;let g=nt(s).filter(m=>H(m)&&V(m)!=="body"),h=null;const u=F(s).position==="fixed";let d=u?_(s):s;for(;H(d)&&!ot(d);){const m=F(d),y=ct(d);y||m.position!=="fixed"||(h=null),(u?!y&&!h:!y&&m.position==="static"&&h&&["absolute","fixed"].includes(h.position)||J(d)&&!y&&Dt(s,d))?g=g.filter(x=>x!==d):h=m,d=_(d)}return p.set(s,g),g}(e,this._c):[].concat(n),l=[...i,o],a=l[0],c=l.reduce((s,p)=>{const f=yt(e,p,r);return s.top=X(f.top,s.top),s.right=st(f.right,s.right),s.bottom=st(f.bottom,s.bottom),s.left=X(f.left,s.left),s},yt(e,a,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const r=k(n),i=M(n);if(n===i)return e;let l={scrollLeft:0,scrollTop:0},a=I(1);const c=I(0);if((r||!r&&o!=="fixed")&&((V(n)!=="body"||J(i))&&(l=it(n)),k(n))){const s=q(n);a=Y(n),c.x=s.x+n.clientLeft,c.y=s.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-l.scrollLeft*a.x+c.x,y:e.y*a.y-l.scrollTop*a.y+c.y}},isElement:H,getDimensions:function(t){return Lt(t)},getOffsetParent:xt,getDocumentElement:M,getScale:Y,async getElementRects(t){let{reference:e,floating:n,strategy:o}=t;const r=this.getOffsetParent||xt,i=this.getDimensions;return{reference:Bt(e,await r(n),o),floating:{x:0,y:0,...await i(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>F(t).direction==="rtl"};function Xt(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=o,s=ut(t),p=r||i?[...s?nt(s):[],...nt(e)]:[];p.forEach(m=>{r&&m.addEventListener("scroll",n,{passive:!0}),i&&m.addEventListener("resize",n)});const f=s&&a?function(m,y){let x,w=null;const L=M(m);function b(){clearTimeout(x),w&&w.disconnect(),w=null}return function v(S,O){S===void 0&&(S=!1),O===void 0&&(O=1),b();const{left:C,top:B,width:R,height:E}=m.getBoundingClientRect();if(S||y(),!R||!E)return;const T={rootMargin:-U(B)+"px "+-U(L.clientWidth-(C+R))+"px "+-U(L.clientHeight-(B+E))+"px "+-U(C)+"px",threshold:X(0,st(1,O))||1};let A=!0;function D($){const W=$[0].intersectionRatio;if(W!==O){if(!A)return v();W?v(!1,W):x=setTimeout(()=>{v(!1,1e-7)},100)}A=!1}try{w=new IntersectionObserver(D,{...T,root:L.ownerDocument})}catch{w=new IntersectionObserver(D,T)}w.observe(m)}(!0),b}(s,n):null;let g,h=-1,u=null;l&&(u=new ResizeObserver(m=>{let[y]=m;y&&y.target===s&&u&&(u.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{u&&u.observe(e)})),n()}),s&&!c&&u.observe(s),u.observe(e));let d=c?q(t):null;return c&&function m(){const y=q(t);!d||y.x===d.x&&y.y===d.y&&y.width===d.width&&y.height===d.height||n(),d=y,g=requestAnimationFrame(m)}(),n(),()=>{p.forEach(m=>{r&&m.removeEventListener("scroll",n),i&&m.removeEventListener("resize",n)}),f&&f(),u&&u.disconnect(),u=null,c&&cancelAnimationFrame(g)}}const Yt=(t,e,n)=>{const o=new Map,r={platform:Vt,...n},i={...r.platform,_c:o};return Pt(t,e,{...r,platform:i})};export{Nt as A,Yt as B,qt as C,It as L,Xt as V,zt as g};
